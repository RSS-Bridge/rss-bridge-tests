<!DOCTYPE html>
<html lang="en">
<head><base href="https://rss-bridge.org/bridge01/" target="_blank">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/ >
    <meta name="description" content="RSS-Bridge" />
    <title>LinuxBlog.io</title>
    <link href="static/style.css?2023-03-24" rel="stylesheet">
    <link rel="icon" type="image/png" href="static/favicon.png">

    
        <link
            href="?action=display&amp;bridge=LinuxBlogBridge&amp;format=Atom"
            title="Atom"
            rel="alternate"
            type="application/atom+xml"
        >
	
        <link
            href="?action=display&amp;bridge=LinuxBlogBridge&amp;format=Json"
            title="Json"
            rel="alternate"
            type="application/json"
        >
	
        <link
            href="?action=display&amp;bridge=LinuxBlogBridge&amp;format=Mrss"
            title="Mrss"
            rel="alternate"
            type="application/rss+xml"
        >
	
        <link
            href="?action=display&amp;bridge=LinuxBlogBridge&amp;format=Plaintext"
            title="Plaintext"
            rel="alternate"
            type="text/plain"
        >
	
        <link
            href="?action=display&amp;bridge=LinuxBlogBridge&amp;format=Sfeed"
            title="Sfeed"
            rel="alternate"
            type="text/plain"
        >
	
    <meta name="robots" content="noindex, follow">
</head>

<body>
    <div class="container">

        <h1 class="pagetitle">
            <a href="https://linuxblog.io" target="_blank">LinuxBlog.io</a>
        </h1>

        <div class="buttons">
            <a href="./#bridge-LinuxBlogBridge">
                <button class="backbutton">← back to rss-bridge</button>
            </a>

                            <a href="?action=display&amp;bridge=LinuxBlogBridge&amp;format=Atom">
                    <button class="rss-feed">
                        Atom                    </button>
                </a>
                            <a href="?action=display&amp;bridge=LinuxBlogBridge&amp;format=Json">
                    <button class="rss-feed">
                        Json                    </button>
                </a>
                            <a href="?action=display&amp;bridge=LinuxBlogBridge&amp;format=Mrss">
                    <button class="rss-feed">
                        Mrss                    </button>
                </a>
                            <a href="?action=display&amp;bridge=LinuxBlogBridge&amp;format=Plaintext">
                    <button class="rss-feed">
                        Plaintext                    </button>
                </a>
                            <a href="?action=display&amp;bridge=LinuxBlogBridge&amp;format=Sfeed">
                    <button class="rss-feed">
                        Sfeed                    </button>
                </a>
            
                    </div>

                    <section class="feeditem">
                <h2>
                    <a
                        class="itemtitle"
                        href="https://linuxblog.io/build-llm-linux-server-on-budget/"
                    >Building an LLM-Optimized Linux Server on a Budget</a>
                </h2>

                                    <time datetime="2025-05-01 00:00:00">
                        2025-05-01 00:00:00                    </time>
                    <p></p>
                
                
                <!-- Intentionally not escaping for html context -->
                         	        	<p>As advancements in machine learning continue to accelerate and evolve, more individuals and small organizations are exploring how to run language models (LLMs) like DeepSeek, LLaMA, Qwen and others on their home servers. This article recommends a Linux server build that&#8217;s LLM-optimized for under $2,000 – a setup that rivals or beats pre-built solutions like Apple’s Mac Studio for cost and raw performance for LLM workloads.</p><div  class="hayden-114789068bae0dcb7617aaa1c8b728bf hayden-after-paragraph" id="hayden-114789068bae0dcb7617aaa1c8b728bf"></div> <p>Previously, we covered the <a href="https://linuxblog.io/install-deepseek-linux/" target="_blank" rel="noopener">step-by-step installation of DeepSeek</a> and <a href="https://linuxblog.io/deepseek-local-self-host/" target="_blank" rel="noopener">how to host it locally and privately</a>. You can also use solutions like <a href="https://jan.ai/" target="_blank" rel="noopener">Jan</a> (<a href="https://cortex.so/" target="_blank" rel="noopener">Cortex</a>), <a href="https://lmstudio.ai/" target="_blank" rel="noopener">LM Studio</a>, <a href="https://github.com/Mozilla-Ocho/llamafile" target="_blank" rel="noopener">llamafile</a> and <a href="https://www.nomic.ai/gpt4all" target="_blank" rel="noopener">gpt4all</a>. Regardless of what you are running, this article will help you build a Linux server that can run small to medium-sized LLMs.</p> <div id="ez-toc-container" class="ez-toc-v2_0_71 ez-toc-wrap-center counter-hierarchy ez-toc-counter ez-toc-custom ez-toc-container-direction"> <div class="ez-toc-title-container"> <div class="ez-toc-title" style="cursor:inherit">In This Article</div> <span class="ez-toc-title-toggle"></span></div> <nav><ul class='ez-toc-list ez-toc-list-level-1' ><li class='ez-toc-page-1 ez-toc-heading-level-2'><a class="ez-toc-link ez-toc-heading-1" href="#LLM-Optimized_Linux_Server" title="LLM-Optimized Linux Server">LLM-Optimized Linux Server</a><ul class='ez-toc-list-level-3' ><li class='ez-toc-heading-level-3'><a class="ez-toc-link ez-toc-heading-2" href="#2000_Build_20_GB_GPU_DDR4_and_PCIe_40" title="$2000 Build: 20 GB GPU, DDR4, and PCIe 4.0">$2000 Build: 20 GB GPU, DDR4, and PCIe 4.0</a></li><li class='ez-toc-page-1 ez-toc-heading-level-3'><a class="ez-toc-link ez-toc-heading-3" href="#3000_Build_24_GB_GPU_DDR5_and_PCIe_50" title="$3000 Build: 24 GB GPU, DDR5, and PCIe 5.0">$3000 Build: 24 GB GPU, DDR5, and PCIe 5.0</a></li><li class='ez-toc-page-1 ez-toc-heading-level-3'><a class="ez-toc-link ez-toc-heading-4" href="#What_about_the_Mac_Mini_or_Mac_Studio" title="What about the Mac Mini or Mac Studio?">What about the Mac Mini or Mac Studio?</a></li></ul></li><li class='ez-toc-page-1 ez-toc-heading-level-2'><a class="ez-toc-link ez-toc-heading-5" href="#Up-to-Date_GPU_Recommendations" title="Up-to-Date GPU Recommendations">Up-to-Date GPU Recommendations</a></li><li class='ez-toc-page-1 ez-toc-heading-level-2'><a class="ez-toc-link ez-toc-heading-6" href="#Multi-GPU_CPU-Only_Inference_Options" title="Multi-GPU &amp; CPU-Only Inference Options">Multi-GPU &amp; CPU-Only Inference Options</a></li><li class='ez-toc-page-1 ez-toc-heading-level-2'><a class="ez-toc-link ez-toc-heading-7" href="#Conclusion" title="Conclusion">Conclusion</a></li></ul></nav></div> <h2><span class="ez-toc-section" id="LLM-Optimized_Linux_Server"></span>LLM-Optimized Linux Server<span class="ez-toc-section-end"></span></h2> <p><img fetchpriority="high" decoding="async" class="alignnone wp-image-19797 size-full" title="This chart compares these GPUs across five benchmarks: 3DMark Steel Nomad Lite, GeekBench 6 OpenCL, GFXBench 5 (Aztec 4K), Raw Performance (TFLOPS), and Memory Bandwidth (GB/s)." src="https://static.linuxblog.io/wp-content/uploads/2025/02/gpu-benchmark-comparison-AMD-NVIDIA-M2-M4_optimized.png" alt="This chart compares these GPUs across five benchmarks: 3DMark Steel Nomad Lite, GeekBench 6 OpenCL, GFXBench 5 (Aztec 4K), Raw Performance (TFLOPS), and Memory Bandwidth (GB/s)." width="868" height="694" srcset="https://static.linuxblog.io/wp-content/uploads/2025/02/gpu-benchmark-comparison-AMD-NVIDIA-M2-M4_optimized.png 868w, https://static.linuxblog.io/wp-content/uploads/2025/02/gpu-benchmark-comparison-AMD-NVIDIA-M2-M4_optimized-300x240.png 300w, https://static.linuxblog.io/wp-content/uploads/2025/02/gpu-benchmark-comparison-AMD-NVIDIA-M2-M4_optimized-560x448.png 560w" sizes="auto" /><br /> <em>Benchmarks compiled by researching and pulling the numbers mainly from <a href="https://nanoreview.net/" target="_blank" rel="noopener">nanoreview</a> and <a href="https://www.reddit.com/r/buildapc/comments/sogg12/best_website_to_get_benchmarks/" target="_blank" rel="noopener">others</a>. </em></p> <p>This chart compares these GPUs across five benchmarks: 3DMark Steel Nomad Lite, GeekBench 6 OpenCL, GFXBench 5 (Aztec 4K), Raw Performance (TFLOPS), and Memory Bandwidth (GB/s).</p> <ul> <li><strong>AMD RX 7900 XT (<span style="color: #ff0000;">red</span>)</strong>: Killer performance across the board, best value.</li> <li><strong>NVIDIA RTX 4080 (<span style="color: #3366ff;">blue</span>)</strong>: Close to RX 7900 XT but pricier.</li> <li><strong>M4 Pro 20-core (Mac Mini) (<span style="color: #008000;">green</span>):</strong> Low performance, low memory bandwidth.</li> <li><strong>M2 Max 38-core (Mac Studio) (<span style="color: #800080;">purple</span>):</strong> Ok performance, but trails behind dedicated GPUs.</li> <li><strong>M2 Ultra 60-core (Mac Studio) (<span style="color: #ff6600;">orange</span>):</strong> Great memory bandwidth, weaker raw performance and pricey.</li> </ul> <p>This is where a custom-built Linux server comes in; with 128 GB of system DDR4 or DDR5 RAM and a powerful GPU with 20 GB of VRAM at a lower price. Sure, for larger models you will be forced to make use of the 128 GB of RAM, or, purchase one of multiple $5,000.00 GPUs. Instead, let&#8217;s take a look at two build options for around $2000.00, including a very capable sub $1000.00 AMD GPU!</p> <p>The goal is to strike a balance between performance and cost and make sure the hardware can handle some heavy lifting of small to medium LLMs like DeepSeek 14b, 32b and 70b. Ok, now on to the good stuff, but first, please note the following:</p> <p><em> 1) For both builds below, ensure the motherboard BIOS is updated to the latest version to support the chosen CPU and RAM configurations. 2) High-capacity RAM configurations (128 GB) may require manual tuning for optimal stability, especially on DDR4 and DDR5. 3) The product links below are Amazon affiliate links, meaning we may earn a small commission if you purchase through them at no extra cost to you. 4) Manufacturer links were not included, as they tend to change frequently and often lead to broken URLs. This approach ensures you always have access to the latest pricing and availability. 5) Compare prices with bhphotovideo.com, newegg.com and eBay (be careful).</em></p> <h3><span class="ez-toc-section" id="2000_Build_20_GB_GPU_DDR4_and_PCIe_40"></span>$2000 Build: 20 GB GPU, DDR4, and PCIe 4.0<span class="ez-toc-section-end"></span></h3> <p><img decoding="async" class="alignnone wp-image-19811 size-large" title="PowerColor Hellhound Radeon RX 7900 XT GPU (20 GB) + Corsair 4000D Airflow Case" src="https://static.linuxblog.io/wp-content/uploads/2025/02/2000-linux-llm-deepseek-build-868x615.png" alt="PowerColor Hellhound Radeon RX 7900 XT GPU (20 GB) + Corsair 4000D Airflow Case" width="868" height="615" srcset="https://static.linuxblog.io/wp-content/uploads/2025/02/2000-linux-llm-deepseek-build-868x615.png 868w, https://static.linuxblog.io/wp-content/uploads/2025/02/2000-linux-llm-deepseek-build-300x213.png 300w, https://static.linuxblog.io/wp-content/uploads/2025/02/2000-linux-llm-deepseek-build-560x397.png 560w" sizes="auto" /><br /> <em>PowerColor Hellhound Radeon RX 7900 XT GPU (20 GB) + Corsair 4000D Airflow Case.</em></p> <p>Here’s the hardware config for the <strong>$2000 budget build</strong>:</p> <ul> <li><strong><a href="https://amzn.to/3Exzona" target="_blank" rel="noopener">AMD Ryzen 9 5900X (12-Core Processor)</a>: </strong>Supports PCIe 4.0. ~ $300</li> <li><a href="https://amzn.to/3Eqfhaq" target="_blank" rel="noopener"><strong>Cooler Master Hyper 212 Black Edition CPU Cooler</strong></a>: Budget friendly air cooling. ~ $30</li> <li><strong><a href="https://amzn.to/3Er5Hns" target="_blank" rel="noopener">MSI MAG B550 Tomahawk Motherboard</a>: </strong>PCIe 4.0 slots. ~ $120</li> <li><strong><a href="https://amzn.to/4hFIsoa" target="_blank" rel="noopener">Corsair Vengeance LPX 128 GB DDR4-3600 RAM</a>: </strong>Up to medium to large models when offloading to RAM. ~ $240</li> <li><a href="https://amzn.to/4gwQVcc" target="_blank" rel="noopener"><strong>TEAMGROUP MP44L 1 TB PCIe 4.0 NVMe SSD</strong></a>: Reliable storage with average NVMe speeds ~ $75</li> <li><a href="https://amzn.to/4gwQVcc" target="_blank" rel="noopener"><strong>PowerColor Hellhound Radeon RX 7900 XT GPU (20 GB)</strong></a>: 20 GB of high VRAM bandwidth for model inference. ~ $900</li> <li><strong><a href="https://amzn.to/3EqOf2H" target="_blank" rel="noopener">Corsair 4000D Airflow Case</a>: </strong>Optimized for airflow, I own this case, it&#8217;s a solid value as well. ~ $100</li> <li><a href="https://amzn.to/3Qa9Ajf" target="_blank" rel="noopener"><strong>MSI MAG A1000GL Gaming Power Supply</strong></a>: Reliable power. ~ $200</li> </ul> <h3><span class="ez-toc-section" id="3000_Build_24_GB_GPU_DDR5_and_PCIe_50"></span>$3000 Build: 24 GB GPU, DDR5, and PCIe 5.0<span class="ez-toc-section-end"></span></h3> <p>You may opt to spend a couple of hundred more on this more powerful build:</p> <ul> <li><a href="https://amzn.to/3EnScoz" target="_blank" rel="noopener"><strong>AMD Ryzen 9 7900X (12-Core Processor)</strong></a>: better single and multithreaded performance. Supports PCIe 5.0. ~ $500</li> <li><a href="https://amzn.to/3Eqfhaq" target="_blank" rel="noopener"><strong>Cooler Master Hyper 212 Black Edition CPU Cooler</strong></a>: Budget friendly air cooling. ~ $30</li> <li><a href="https://amzn.to/3ErKxFT" target="_blank" rel="noopener"><strong>MSI PRO B650-S WIFI Motherboard</strong></a>: PCIe 5.0 slot for GPU. ~ $250</li> <li><a href="https://amzn.to/4aOf78T" target="_blank" rel="noopener"><strong>Corsair Vengeance 128GB DDR5-5600 RAM</strong></a>: DDR5 has higher memory bandwidth than DDR4. ~ $420</li> <li><strong><a href="https://amzn.to/42Om3k9" target="_blank" rel="noopener">TEAMGROUP T-Force Cardea Z540 2TB PCIe 5.0 NVMe SSD</a>: </strong>Faster, only if needed. ~ $150</li> <li><strong><a href="https://amzn.to/4aPE9EA" target="_blank" rel="noopener">ASUS Dual Radeon RX 7900 XTX OC (24 GB)</a>:</strong> ~ $1400</li> <li><strong><a href="https://amzn.to/3EqOf2H" target="_blank" rel="noopener">Corsair 4000D Airflow Case</a></strong> ~ $100</li> <li><a href="https://amzn.to/4hR2DQb" target="_blank" rel="noopener"><strong>MSI MAG 1250GL PCIE 5</strong></a> &#8211; Reliable power. ~ $220</li> </ul> <h3><span class="ez-toc-section" id="What_about_the_Mac_Mini_or_Mac_Studio"></span>What about the Mac Mini or Mac Studio?<span class="ez-toc-section-end"></span></h3> <p>Apple&#8217;s hardware like the Mac Mini, Mac Studio and MacBooks use a unified memory architecture where the CPU and GPU share the same memory pool. This means the GPU can access the system RAM as needed. A Mac Mini with 64 GB of unified memory can allocate a significant portion for GPU tasks.</p> <p>However, most consumer grade discrete GPUs with dedicated VRAM max out at ~ 24 GB. The NVIDIA RTX 4090 has 24 GB of VRAM but starts at $3,000!</p> <p>To balance performance and cost, our build features a 20 GB GPU for about $1,000 and 128 GB of DDR4 RAM fully built (minus additional case fans and a few accessories) for around $2,000. 128 GB of unified memory in a Mac Studio would cost $5,000 to $10,000.</p> <p>Notice also the PCIe 5 build above with features 128 GB of DDR5 RAM, providing even more memory bandwidth and even more performance for demanding workloads at still half the cost of a 128 GB Mac Studio.</p> <p>The Mac Mini is a more affordable option at around $2,200 for the top 64 GB memory. Also, take a look at <a href="https://www.youtube.com/watch?v=ayI5FVuEdu8" target="_blank" rel="noopener">this Mac Mini LLM comparison YouTube video</a>.</p> <p>Now, I have to also mention that while these builds above are faster than even the Mac Studio M2 Ultra 60-core, the amount of electricity that the dedicated GPUs use will be significantly more, as much as 2x, or more! If electricity cost are high in your area, keep this in mind.</p> <p><em><strong>Update May 2nd 2025:</strong></em></p> <h2><span class="ez-toc-section" id="Up-to-Date_GPU_Recommendations"></span><strong>Up-to-Date GPU Recommendations</strong><span class="ez-toc-section-end"></span></h2> <p>In the last few months, the NVIDIA RTX 4060 has emerged as the go-to budget GPU for LLM inference. Delivering 40+ tokens/sec on 7–8 B models with 70–90% utilization in <a href="https://www.databasemart.com/blog/ollama-gpu-benchmark-rtx4060" target="_blank" rel="noopener">Ollama benchmarks</a>. If you can stretch your budget slightly, the newly released RTX 5060 Ti 16 GB offers about <a href="https://www.tomshardware.com/pc-components/gpus/rtx-5060-ti-16gb-vs-rtx-4060-ti-16gb-gpu-faceoff#section-rtx-5060-ti-16gb-vs-rtx-4060-ti-16gb-ai-and-content-creation-performance" target="_blank" rel="noopener">24% more performance</a> per dollar than a 4060 Ti, thanks to Blackwell-architecture gains. This makes it an attractive upgrade if you need extra throughput without jumping to the <a href="https://www.pugetsystems.com/labs/articles/nvidia-geforce-rtx-5090-amp-5080-ai-review/" target="_blank" rel="noopener">$700+ tier</a>.</p> <h2><span class="ez-toc-section" id="Multi-GPU_CPU-Only_Inference_Options"></span><strong>Multi-GPU &amp; CPU-Only Inference Options</strong><span class="ez-toc-section-end"></span></h2> <p>Beyond single-card setups, open-source engines like <a href="https://github.com/ggml-org/llama.cpp" target="_blank" rel="noopener">llama.cpp</a> now include <a href="https://www.reddit.com/r/LocalLLaMA/comments/19eplua/test_results_recommended_gguf_models_type_size/" target="_blank" rel="noopener">GGUF memory layouts</a> and <a href="https://www.tomshardware.com/pc-components/cpus/amds-zen-5-avx-512-performance-tested-zen-5-performs-significantly-better-than-zen-4-on-linux-without-consuming-any-more-power" target="_blank" rel="noopener">AVX-512 acceleration</a>, pushing CPU-only inference on small models into the 10–20 tokens/sec range on modern x86 rigs.</p> <p>For larger clusters, <a href="https://www.comet.com/site/blog/build-local-llm-server/" target="_blank" rel="noopener">Comet’s tutorial</a> shows how to repurpose crypto-mining hardware into a Kubernetes-backed LLM farm by using Docker, <a href="https://github.com/NVIDIA/nccl">NCCL</a>, and <a href="https://github.com/horovod/horovod" target="_blank" rel="noopener">Horovod</a> to <a href="https://huggingface.co/spaces/nanotron/ultrascale-playbook" target="_blank" rel="noopener">shard 70 B-parameter models across multiple budget GPUs</a> while keeping per-node costs under $1,000.</p> <h2><span class="ez-toc-section" id="Conclusion"></span>Conclusion<span class="ez-toc-section-end"></span></h2> <p>Building a custom Linux machine for LLM workloads is a smart move if you want performance and flexibility without the expense of pre-built options. Compared to the Mac Studio which can cost over $5,000 for 128 GB of unified memory, these Linux builds get you similar or more total memory and GPU for less than half the price.</p> <p>With a $2,000 build you get a 20 GB GPU and 128 GB of DDR4 RAM and is suitable for small to medium-sized models like DeepSeek 14B, 32B and even 70B when offloading to RAM. The $3,000 build upgrades to DDR5, PCIe 5.0 and a 24 GB GPU and is even more memory bandwidth for heavy tasks—all for a fraction of the cost of a Mac.</p> <p>You should also consider electricity costs, since powerful dedicated GPUs can consume a lot more power compared to Apple&#8217;s optimized chips. If power efficiency is a concern in your area, this should be factored in.</p> <p>Overall, this is a powerful, scalable and budget friendly alternative to cloud services and pre-built machines. Whether you’re experimenting with LLMs locally, running inference or fine-tuning models, a well optimized Linux machine gives you control and performance at a relatively low cost.</p><div  class="hayden-9b77d541541b404f15ad13ce5d27cf3e hayden-end-of-article" id="hayden-9b77d541541b404f15ad13ce5d27cf3e"></div> <h3 class="tag-line" style="margin-top: 30px; padding-top: 20px; padding-bottom: 8px; border-top: 1px solid #ddd;">Tags: <a href="https://linuxblog.io/tag/ai/" rel="tag">AI</a>, <a href="https://linuxblog.io/tag/homelab/" rel="tag">homelab</a>, <a href="https://linuxblog.io/tag/linux/" rel="tag">linux</a>, <a href="https://linuxblog.io/tag/memory/" rel="tag">memory</a>, <a href="https://linuxblog.io/tag/performance/" rel="tag">performance</a>, <a href="https://linuxblog.io/tag/server/" rel="tag">server</a></h3> <div class="custom-post-footer" style="margin-top: 0px; padding-top: 0px; padding-bottom: 0px;"> <p class="share-message"><i>Thanks for reading! Please share this article on <a href="https://www.linkedin.com/shareArticle?mini=true&#038;url=https%3A%2F%2Flinuxblog.io%2Fbuild-llm-linux-server-on-budget%2F&#038;title=Building+an+LLM-Optimized+Linux+Server+on+a+Budget" class="share-link" target="_blank" rel="noopener nofollow">LinkedIn↗</a>, <a href="https://twitter.com/intent/tweet?url=https%3A%2F%2Flinuxblog.io%2Fbuild-llm-linux-server-on-budget%2F&#038;text=Building+an+LLM-Optimized+Linux+Server+on+a+Budget" class="share-link" target="_blank" rel="noopener nofollow">X (Twitter)↗</a>, <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Flinuxblog.io%2Fbuild-llm-linux-server-on-budget%2F" class="share-link" target="_blank" rel="noopener nofollow">Facebook↗</a>, <a href="https://www.reddit.com/submit?url=https%3A%2F%2Flinuxblog.io%2Fbuild-llm-linux-server-on-budget%2F&#038;title=Building+an+LLM-Optimized+Linux+Server+on+a+Budget" class="share-link" target="_blank" rel="noopener nofollow">Reddit↗</a>, <a href="https://news.ycombinator.com/submit" target="_blank" rel="noopener nofollow">HN↗</a> or your favorite social platform. Stay updated by <a href="https://landing.mailerlite.com/webforms/landing/t2y6q4" class="additional-link" target="_blank" rel="noopener noreferrer">subscribing to our newsletter</a>, and consider <a href="https://shop.linuxcommunity.io" class="additional-link" target="_blank" rel="noopener noreferrer">grabbing a t-shirt or membership</a> to support the community. Lastly, I would like to <a href="https://linuxcommunity.io/invites/xrFmjFBFeT" class="additional-link" target="_blank" rel="noopener noreferrer">personally invite you</a> to connect with other Linux enthusiasts in our <a href="https://linuxcommunity.io/invites/xrFmjFBFeT" class="additional-link" target="_blank" rel="noopener noreferrer">community forums</a>.<br />             </i></p> </p></div> 					 											
                
                            </section>
                    <section class="feeditem">
                <h2>
                    <a
                        class="itemtitle"
                        href="https://linuxblog.io/deepseek-local-self-host/"
                    >DeepSeek Local: How to Self-Host DeepSeek (Privacy and Control)</a>
                </h2>

                                    <time datetime="2025-05-01 00:00:00">
                        2025-05-01 00:00:00                    </time>
                    <p></p>
                
                
                <!-- Intentionally not escaping for html context -->
                         	        	<p><em>By following this guide, you will be able to successfully self-host your preferred DeepSeek model on a home lab or home office server, harnessing the potential of these AI models in a private and controlled environment.</em></p><div  class="hayden-72187f3fc744a47450ee040888655f26 hayden-after-paragraph" id="hayden-72187f3fc744a47450ee040888655f26"></div> <p>DeepSeek is a powerful AI model that can be self-hosted locally for faster performance, improved privacy, and flexible configuration. This guide demonstrates how to self-host DeepSeek in a home lab environment, allowing access from multiple devices on your local network. We will cover self-hosting DeepSeek, configuring a web interface and running it as an always online service.</p> <p><img fetchpriority="high" decoding="async" class="alignnone wp-image-19677 size-large" title="Self-Hosted DeepSeek for Privacy and Control (screenshot)" src="https://static.linuxblog.io/wp-content/uploads/2025/01/open-webUI-deepseek-selfhosted-868x477.png" alt="Self-Hosted DeepSeek for Privacy and Control (screenshot)" width="868" height="477" srcset="https://static.linuxblog.io/wp-content/uploads/2025/01/open-webUI-deepseek-selfhosted-868x477.png 868w, https://static.linuxblog.io/wp-content/uploads/2025/01/open-webUI-deepseek-selfhosted-300x165.png 300w, https://static.linuxblog.io/wp-content/uploads/2025/01/open-webUI-deepseek-selfhosted-560x308.png 560w" sizes="auto" /><br /> <em>Self-hosted DeepSeek accessed via wired LAN devices and also non-guest Wi-Fi network.</em></p> <div id="ez-toc-container" class="ez-toc-v2_0_71 ez-toc-wrap-center counter-hierarchy ez-toc-counter ez-toc-custom ez-toc-container-direction"> <div class="ez-toc-title-container"> <div class="ez-toc-title" style="cursor:inherit">In This Article</div> <span class="ez-toc-title-toggle"></span></div> <nav><ul class='ez-toc-list ez-toc-list-level-1' ><li class='ez-toc-page-1 ez-toc-heading-level-2'><a class="ez-toc-link ez-toc-heading-1" href="#Why_Self_Host_DeepSeek" title="Why Self Host DeepSeek">Why Self Host DeepSeek</a><ul class='ez-toc-list-level-3' ><li class='ez-toc-heading-level-3'><a class="ez-toc-link ez-toc-heading-2" href="#Why_not" title="Why not">Why not</a></li></ul></li><li class='ez-toc-page-1 ez-toc-heading-level-2'><a class="ez-toc-link ez-toc-heading-3" href="#Preparing_to_Self-Host_DeepSeek" title="Preparing to Self-Host DeepSeek">Preparing to Self-Host DeepSeek</a></li><li class='ez-toc-page-1 ez-toc-heading-level-2'><a class="ez-toc-link ez-toc-heading-4" href="#Run_DeepSeek_with_a_Web_Interface_Open_WebUI" title="Run DeepSeek with a Web Interface (Open WebUI)">Run DeepSeek with a Web Interface (Open WebUI)</a><ul class='ez-toc-list-level-3' ><li class='ez-toc-heading-level-3'><a class="ez-toc-link ez-toc-heading-5" href="#Using_SSH_Tunnel_Recommended" title="Using SSH Tunnel (Recommended)">Using SSH Tunnel (Recommended)</a></li><li class='ez-toc-page-1 ez-toc-heading-level-3'><a class="ez-toc-link ez-toc-heading-6" href="#Using_Reverse_Proxy_with_Nginx" title="Using Reverse Proxy with Nginx">Using Reverse Proxy with Nginx</a></li></ul></li><li class='ez-toc-page-1 ez-toc-heading-level-2'><a class="ez-toc-link ez-toc-heading-7" href="#Conclusion" title="Conclusion">Conclusion</a></li><li class='ez-toc-page-1 ez-toc-heading-level-2'><a class="ez-toc-link ez-toc-heading-8" href="#Quantization_for_Optimizing_Performance" title="Quantization for Optimizing Performance">Quantization for Optimizing Performance</a></li></ul></nav></div> <h2><span class="ez-toc-section" id="Why_Self_Host_DeepSeek"></span>Why Self Host DeepSeek<span class="ez-toc-section-end"></span></h2> <p><em>Note: </em><em>DeepSeek-R1 is a 671B model with a <a href="https://www.ibm.com/think/topics/mixture-of-experts" target="_blank" rel="noopener">Mixture of Experts (MoE)</a> architecture requiring 1.5 TB of VRAM, making it impractical for consumer hardware. DeepSeek-R1 distilled models, like DeepSeek-R1-Distill-Qwen-7B and DeepSeek-R1-Distill-LLaMA-70B, are fine-tuned versions of open-source models like <a href="https://www.llama.com/" target="_blank" rel="noopener">LLaMA</a> and <a href="https://qwenlm.github.io/" target="_blank" rel="noopener">Qwen</a>, trained on data generated by DeepSeek-R1. Thus, inheriting DeepSeek’s reasoning capabilities while being far more efficient to self-host. Enjoy!</em></p> <p data-pm-slice="1 3 []">Self-hosting DeepSeek gives you:</p> <ul> <li><strong>Privacy:</strong> Data is on your infrastructure, not 3rd party servers.</li> <li><strong>Speed:</strong> Low network latency. Especially if you will be running the smaller models.</li> <li><strong>Custom Hardware:</strong> Config CPU, GPU, and memory allocation to your needs.</li> <li><strong>Scalability:</strong> <a href="https://linuxblog.io/home-lab-beginners-guide-hardware/" target="_blank" rel="noopener">Expand your home lab</a> as needed.</li> <li><strong>Control:</strong> No external dependencies or vendor lock-in.</li> <li><strong>Learning</strong>: Enhance your skills by managing and optimizing your own AI infrastructure.</li> </ul> <h3><span class="ez-toc-section" id="Why_not"></span>Why not<span class="ez-toc-section-end"></span></h3> <p>A few of the challenges are:</p> <ul> <li><strong>Model Bias and Censorship:</strong> <a href="https://www.nytimes.com/2025/01/29/world/asia/deepseek-china-censorship.html" target="_blank" rel="noopener">Restricted/censored responses</a> on sensitive topics (or <em>use <a href="https://github.com/huggingface/open-r1" target="_blank" rel="noopener">open-r1</a>).</em></li> <li><strong>Cost:</strong> High initial and ongoing expenses for hardware and electricity.</li> <li><strong>Longevity:</strong> Future AI models will likely require fairly frequent hardware upgrades.</li> <li><strong>Maintenance:</strong> Requires regular updates and ongoing technical upkeep.</li> <li><strong>Scalability Limits:</strong> Physical space, noise, and heat challenges can hinder expansion.</li> </ul> <h2><span class="ez-toc-section" id="Preparing_to_Self-Host_DeepSeek"></span><strong>Preparing to Self-Host DeepSeek</strong><span class="ez-toc-section-end"></span></h2> <p>Before setting up DeepSeek, ensure your system meets the necessary hardware requirements, especially if running larger models that require high RAM and GPU resources.</p> <ul> <li><strong>CPU:</strong> Powerful multi-core processor (12+ cores recommended) for handling multiple requests.</li> <li><strong>GPU:</strong> <a href="https://developer.nvidia.com/cuda-gpus" target="_blank" rel="noopener">NVIDIA GPU with CUDA</a> support for accelerated performance. <a href="https://www.amd.com/en/products/graphics/radeon-ai.html" target="_blank" rel="noopener">AMD</a> will also work. (less popular/tested)</li> <li><strong>RAM:</strong> Minimum 16 GB, preferably 32 GB or more for larger models.</li> <li><strong>Storage:</strong> NVMe storage for faster read/write operations.</li> <li><strong>Operating System:</strong> <a href="https://ubuntu.com/server" target="_blank" rel="noopener">Ubuntu</a> or <a href="https://distrowatch.com/search.php?basedon=Ubuntu" target="_blank" rel="noopener">Ubuntu-based distributions</a> are preferred for compatibility.</li> <li><strong>Censorship/restrictions:</strong> If you are looking for DeepSeek-R1 with no censorship or content restrictions, try <a href="https://github.com/huggingface/open-r1" target="_blank" rel="noopener">open-r1</a>.</li> <li><strong>Distilled models:</strong> Read more about these official models here: <a href="https://api-docs.deepseek.com/news/news250120" target="_blank" rel="noopener">api-docs.deepseek.com/news/news250120</a>.</li> <li>More detailed hardware guidance can be found <a href="https://apxml.com/posts/gpu-requirements-deepseek-r1" target="_blank" rel="noopener">here</a>.</li> </ul> <p>Here are three recommended GPUs: <a href="https://amzn.to/3WBtUhh" target="_blank" rel="noopener">NVIDIA RTX 4080</a>, <a href="https://amzn.to/40D8ukX" target="_blank" rel="noopener">NVIDIA RTX 4090</a>, and the <a href="https://amzn.to/40BzrWo" target="_blank" rel="noopener">NVIDIA A100</a>. Find them also on eBay used.</p> <p><strong>Install</strong></p> <p>Please read the <a href="https://linuxblog.io/install-deepseek-linux/">Installing DeepSeek on Linux in 3 mins</a> guide for detailed steps.</p> <p>In short, install and run using:</p> <pre>curl -fsSL https://ollama.com/install.sh | sh  ollama run deepseek-r1:8b</pre> <h2><span class="ez-toc-section" id="Run_DeepSeek_with_a_Web_Interface_Open_WebUI"></span><strong>Run DeepSeek with a Web Interface (Open WebUI)</strong><span class="ez-toc-section-end"></span></h2> <p><img decoding="async" class="alignnone wp-image-19675 size-large" title="DeepSeek Self Hosted on LAN (local area network)" src="https://static.linuxblog.io/wp-content/uploads/2025/01/deepseek-self-hosted-local-LAN-868x488.png" alt="DeepSeek Self Hosted on LAN (local area network)" width="868" height="488" srcset="https://static.linuxblog.io/wp-content/uploads/2025/01/deepseek-self-hosted-local-LAN-868x488.png 868w, https://static.linuxblog.io/wp-content/uploads/2025/01/deepseek-self-hosted-local-LAN-300x169.png 300w, https://static.linuxblog.io/wp-content/uploads/2025/01/deepseek-self-hosted-local-LAN-560x315.png 560w" sizes="auto" /></p> <p>By leveraging <a href="https://openwebui.com/" target="_blank" rel="noopener">Open WebUI</a>, you can effortlessly interact with DeepSeek through a centralized, user-friendly dashboard accessible from any device on your local network. Open WebUI can be installed using <a href="https://pip.pypa.io/en/stable/installation/" target="_blank" rel="noopener">pip</a>, the Python package installer.</p> <p><strong>Install Open WebUI:</strong></p> <p>Open your terminal and run the following command to install Open WebUI:</p> <pre>pip install open-webui</pre> <p>Alternatively, you can <a href="https://snapcraft.io/install/open-webui/ubuntu" target="_blank" rel="noopener">install with Snap instead</a>:</p> <pre>sudo apt update  sudo apt install snapd  sudo snap install open-webui --beta</pre> <p><strong>Running Open WebUI:</strong></p> <p>After installation, you can start Open WebUI by executing:</p> <pre>open-webui serve</pre> <p>This will start the Open WebUI server, which you can access at <code>http://localhost:8080</code> or replace `localhost` with your server&#8217;s local IP address to access from other devices on your network. More on that later!</p> <h3><span class="ez-toc-section" id="Using_SSH_Tunnel_Recommended"></span><strong>Using SSH Tunnel (Recommended)</strong><span class="ez-toc-section-end"></span></h3> <p><img decoding="async" class="alignnone wp-image-19679 size-large" title="DeepSeek R1 local using SSH tunnel (Recommended)" src="https://static.linuxblog.io/wp-content/uploads/2025/01/open-webui-deepseek-using-ssh-tunnel-868x656.png" alt="DeepSeek R1 local using SSH tunnel (Recommended)" width="868" height="656" srcset="https://static.linuxblog.io/wp-content/uploads/2025/01/open-webui-deepseek-using-ssh-tunnel-868x656.png 868w, https://static.linuxblog.io/wp-content/uploads/2025/01/open-webui-deepseek-using-ssh-tunnel-300x227.png 300w, https://static.linuxblog.io/wp-content/uploads/2025/01/open-webui-deepseek-using-ssh-tunnel-560x423.png 560w" sizes="auto" /><br /> <em>Screenshot of Open WebUI showing chat interaction with DeepSeek R1</em></p> <p>SSH tunneling can be used to securely connect your PC to the DeepSeek server within your home network. This ensures that the connection is encrypted and only accessible from your LAN (Local Area Network) devices.</p> <p><strong>How this works:</strong></p> <ul> <li><strong>SSH Connection:</strong> Uses SSH (usually on port 22) to create an encrypted tunnel.</li> <li><strong>Port Forwarding:</strong> Forwards a port from your local machine to your server on the same LAN, allowing secure access to Open WebUI.</li> </ul> <p><strong>Steps to Set Up SSH Tunneling:</strong></p> <ol> <li><strong>Ensure SSH Server is Installed on the Local Server:</strong> <pre>sudo apt update  sudo apt install openssh-server</pre> </li> <li><strong>Start and Enable the SSH Service on the Local Server:</strong> <pre>sudo systemctl start ssh  sudo systemctl enable ssh</pre> <p><em>Note:</em> On some distributions, the service might be named <code>sshd</code> instead of <code>ssh</code>. Verify the service name using:</p> <pre>sudo systemctl status ssh  # or  sudo systemctl status sshd</pre> </li> <li><strong>Configure the Firewall on the Local Server to Allow SSH and Open WebUI Ports:</strong><em>Note:</em> Replace <code>ufw</code> with your firewall manager if different.Allow SSH (Port 22) from Local Network: <pre>sudo ufw allow from 192.168.1.0/24 to any port 22 proto tcp</pre> <p><em>Replace <code>192.168.1.0/24</code> with your local network&#8217;s subnet if different.</em></p> <p>Allow Open WebUI (Port 8080) from Local Network:</p> <pre>sudo ufw allow from 192.168.1.0/24 to any port 8080 proto tcp</pre> <p><em>Replace <code>192.168.1.0/24</code> with your local network&#8217;s subnet if different.</em></li> <li><strong>SSH Tunnel from Your Local Machine:</strong> On your local machine, run: <pre>ssh -L 8080:localhost:8080 user@192.168.1.100</pre> <p><em>Replace <code>8080</code> with your preferred port, <code>user</code> with your SSH username, and <code>192.168.1.100</code> with the DeepSeek server’s local IP address.</em></p> <p><strong>Explanation:</strong><code><br /> -L 8080:localhost:8080</code>: Forwards your local port 8080 to the server’s port 8080.<br /> <code>user@192.168.1.100</code>: Replace <code>user</code> with your SSH username and <code>192.168.1.100</code> with the server’s local IP address.</li> <li><strong>(Optional)</strong> If SSH is on a different port (e.g., 2222), use the <code>-p</code> flag: <pre>ssh -p 2222 -L 8080:localhost:8080 user@192.168.1.100</pre> </li> <li><strong>Access Open WebUI Locally:</strong> Once the SSH tunnel is established, open your browser and go to: <pre>http://localhost:8080</pre> <p>Now, Open WebUI is only accessible on your local home/office network via <code>http://localhost:8080</code>.</li> </ol> <p><strong>Advantages:</strong></p> <ul> <li><strong>Security:</strong> Traffic is encrypted via SSH tunnel.</li> <li><strong>No extra ports open:</strong> Including the SSH port, which is only accessible from within your local network</li> <li><strong>Easy:</strong> Uses existing SSH infrastructure. It&#8217;s likely you would have SSH already enabled on a home or office server.</li> </ul> <p><strong>Considerations:</strong></p> <ul> <li><strong>Manual:</strong> Requires a tunnel to be established each time you want to access Open WebUI.</li> <li><strong>Local Port Available:</strong> Make sure your local port 8080 is free, or choose a different local port.</li> <li><strong>Persistent Tunnels:</strong> For automatic reconnection, consider using tools like <code>autossh</code>.</li> </ul> <p><strong>Automation:</strong> While the manual method requires setting up the tunnel each time, you can automate this process using tools like <code>autossh</code> to maintain persistent tunnels that also automatically reconnects:</p> <div> <pre dir="ltr">sudo apt install autossh  autossh -M 0 -f -N -L 8080:localhost:8080 user@192.168.1.100</pre> </div> <h3><span class="ez-toc-section" id="Using_Reverse_Proxy_with_Nginx"></span><strong>Using Reverse Proxy with Nginx</strong><span class="ez-toc-section-end"></span></h3> <p>You can also consider instead, placing DeepSeek behind Nginx:</p> <ol> <li style="list-style-type: none;"> <ol> <li><strong>Install Nginx:</strong> <pre>sudo apt install nginx  </pre> </li> <li><strong>Create a Reverse Proxy Config:</strong> <pre>sudo vi /etc/nginx/sites-available/deepseek  </pre> </li> <li><strong>Add the following configuration:</strong> <pre>server {      listen 80;      server_name your-local-domain.local;        location / {          proxy_pass http://localhost:8080;          proxy_set_header Host $host;          proxy_set_header X-Real-IP $remote_addr;          proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;      }  }  </pre> </li> <li><strong>Enable and Restart Nginx:</strong> <pre>sudo ln -s /etc/nginx/sites-available/deepseek /etc/nginx/sites-enabled/  sudo nginx -t  # Test the configuration  sudo systemctl restart nginx</pre> </li> </ol> </li> </ol> <p>Now, access via: https://your-local-domain.local/</p> <h2><span class="ez-toc-section" id="Conclusion"></span><strong>Conclusion</strong><span class="ez-toc-section-end"></span></h2> <p><img loading="lazy" decoding="async" class="alignnone wp-image-19733 size-large" title="DeepSeek R1 Benchmark Table" src="https://static.linuxblog.io/wp-content/uploads/2025/01/deepseek_r1_benchmark_table-868x428.png" alt="DeepSeek R1 Benchmark Table" width="868" height="428" srcset="https://static.linuxblog.io/wp-content/uploads/2025/01/deepseek_r1_benchmark_table-868x428.png 868w, https://static.linuxblog.io/wp-content/uploads/2025/01/deepseek_r1_benchmark_table-300x148.png 300w, https://static.linuxblog.io/wp-content/uploads/2025/01/deepseek_r1_benchmark_table-560x276.png 560w" sizes="auto" /><br /> <em>Benchmark table: 6 models <a href="https://api-docs.deepseek.com/news/news250120" target="_blank" rel="noopener">Distilled from DeepSeek-R1</a> and fully open-sourced</em></p> <p>Running DeepSeek in your home lab offers more control, privacy, and performance. Self-hosting DeepSeek also eliminates reliance on external cloud dependencies, increases security, and offers more customization options. Perfect for home lab enthusiasts, developers, and professionals.</p> <p>* DeepSeek-R1 is a 671B model with a <a href="https://www.ibm.com/think/topics/mixture-of-experts" target="_blank" rel="noopener">Mixture of Experts (MoE) architecture</a> that allows for task specialization. It requires around 1.5 TB of VRAM, making installing it far beyond the self-host capabilities of consumer hardware. It was trained from scratch on a diverse dataset to achieve strong reasoning and language understanding. DeepSeek-R1-Distill models are fine-tuned versions of open-source models like LLaMA and Qwen trained on data generated by DeepSeek-R1. These distilled models like DeepSeek-R1-Distill-Qwen-7B and DeepSeek-R1-Distill-LLaMA-70B inherit the base models of their respective models but get the reasoning capabilities introduced by DeepSeek’s fine-tuning. They are more efficient and practical to deploy on consumer hardware compared to the full DeepSeek-R1 model, which requires a ton of compute resources. Enjoy!</p> <p><em><strong>Update: May 1st, 2025:</strong></em></p> <h2><span class="ez-toc-section" id="Quantization_for_Optimizing_Performance"></span>Quantization for Optimizing Performance<span class="ez-toc-section-end"></span></h2> <p>Quantization is a technique that really opens up the possibilities for running DeepSeek models on a wider range of hardware. By lowering the precision of model weights and activations, you can greatly reduce memory usage and processing requirements while still maintaining accuracy.</p> <p>That&#8217;s where quantization comes in. By transforming model weights and activations into 4-bit values, you can reduce the model size by nearly 8:1 compared to standard 32-bit. Of course, aggressive compression can introduce some accuracy loss due to quantization bias. So it&#8217;s best suited for scenarios where resource efficiency really is your top priority!</p> <p>8-bit quantization strikes a balance between efficiency and accuracy. By capping precision at 8 bits, you reduce model memory requirements to a quarter of what they are with 32-bit floating point. That also gives you a significant boost in computational throughput. And, crucially, <a href="https://www.mathworks.com/company/technical-articles/what-is-int8-quantization-and-why-is-it-popular-for-deep-neural-networks.html" target="_blank" rel="noopener">INT8 quantization</a> usually preserves model accuracy well. That makes it a popular choice for real-time applications like conversational AI, image processing and chatbots.</p> <p><a href="https://www.exxactcorp.com/blog/hpc/what-is-fp64-fp32-fp16" target="_blank" rel="noopener">FP32 precision</a> remains the gold standard for model training and any scenario where maximum accuracy is essential. That comes at a cost, though: much greater memory consumption and slower inference speeds. You typically need powerful GPUs or TPUs for that. So it&#8217;s generally reserved for research, model development or specialized tasks where even minor accuracy losses just aren&#8217;t acceptable.</p> <p>One recent advancement that&#8217;s helped with this is <a href="https://pytorch.org/tutorials/recipes/recipes/dynamic_quantization.html" target="_blank" rel="noopener">dynamic quantization</a>. That allows you to quantize different layers or components of the DeepSeek model at varying bit-widths based on their importance. So critical layers like attention mechanisms might use 4 or 6 bits, while less sensitive layers can be quantized as low as 1.58 bits. This technique has enabled reductions in model size of up to 80%, making it feasible to run large DeepSeek models on systems with as little as 20 GB of RAM, though with slower processing speeds.</p> <p>Dynamic quantization offers advanced users the flexibility to fine-tune that balance between size and performance. However, you should test your models for accuracy.</p> <p><strong>References:</strong></p> <p>&#8212; <a href="https://fireworks.ai/blog/fine-tuning-deepseek-models" target="_blank" rel="noopener">Fine-Tuning DeepSeek v3 &amp; R1 to optimize quality, latency, &amp; cost</a></p> <p>&#8212; <a href="https://gigazine.net/gsc_news/en/20250129-deepseek-r1-dynamic-quantized/" target="_blank" rel="noopener">Dynamic quantization model that reduces the size of DeepSeek-R1 by up to 80%</a></p> <h3 class="tag-line" style="margin-top: 30px; padding-top: 20px; padding-bottom: 8px; border-top: 1px solid #ddd;">Tags: <a href="https://linuxblog.io/tag/ai/" rel="tag">AI</a>, <a href="https://linuxblog.io/tag/cybersecurity/" rel="tag">cybersecurity</a>, <a href="https://linuxblog.io/tag/homelab/" rel="tag">homelab</a>, <a href="https://linuxblog.io/tag/security/" rel="tag">security</a>, <a href="https://linuxblog.io/tag/server/" rel="tag">server</a></h3> <div class="custom-post-footer" style="margin-top: 0px; padding-top: 0px; padding-bottom: 0px;"> <p class="share-message"><i>Thanks for reading! Please share this article on <a href="https://www.linkedin.com/shareArticle?mini=true&#038;url=https%3A%2F%2Flinuxblog.io%2Fdeepseek-local-self-host%2F&#038;title=DeepSeek+Local%3A+How+to+Self-Host+DeepSeek+%28Privacy+and+Control%29" class="share-link" target="_blank" rel="noopener nofollow">LinkedIn↗</a>, <a href="https://twitter.com/intent/tweet?url=https%3A%2F%2Flinuxblog.io%2Fdeepseek-local-self-host%2F&#038;text=DeepSeek+Local%3A+How+to+Self-Host+DeepSeek+%28Privacy+and+Control%29" class="share-link" target="_blank" rel="noopener nofollow">X (Twitter)↗</a>, <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Flinuxblog.io%2Fdeepseek-local-self-host%2F" class="share-link" target="_blank" rel="noopener nofollow">Facebook↗</a>, <a href="https://www.reddit.com/submit?url=https%3A%2F%2Flinuxblog.io%2Fdeepseek-local-self-host%2F&#038;title=DeepSeek+Local%3A+How+to+Self-Host+DeepSeek+%28Privacy+and+Control%29" class="share-link" target="_blank" rel="noopener nofollow">Reddit↗</a>, <a href="https://news.ycombinator.com/submit" target="_blank" rel="noopener nofollow">HN↗</a> or your favorite social platform. Stay updated by <a href="https://landing.mailerlite.com/webforms/landing/t2y6q4" class="additional-link" target="_blank" rel="noopener noreferrer">subscribing to our newsletter</a>, and consider <a href="https://shop.linuxcommunity.io" class="additional-link" target="_blank" rel="noopener noreferrer">grabbing a t-shirt or membership</a> to support the community. Lastly, I would like to <a href="https://linuxcommunity.io/invites/xrFmjFBFeT" class="additional-link" target="_blank" rel="noopener noreferrer">personally invite you</a> to connect with other Linux enthusiasts in our <a href="https://linuxcommunity.io/invites/xrFmjFBFeT" class="additional-link" target="_blank" rel="noopener noreferrer">community forums</a>.<br />             </i></p> </p></div> 					 											
                
                            </section>
                    <section class="feeditem">
                <h2>
                    <a
                        class="itemtitle"
                        href="https://linuxblog.io/install-deepseek-linux/"
                    >Install DeepSeek on Linux in 3 Minutes</a>
                </h2>

                                    <time datetime="2025-04-30 00:00:00">
                        2025-04-30 00:00:00                    </time>
                    <p></p>
                
                
                <!-- Intentionally not escaping for html context -->
                         	        	<p>DeepSeek, founded in 2023 by Liang Wenfeng, is a Chinese artificial intelligence company that develops open-source large language models (LLMs). Their flagship model, DeepSeek-R1, is gaining popularity for its advanced reasoning capabilities, with performance comparable to OpenAI-o1 across tasks like math, code, and general reasoning. In this guide, we’ll walk you through installing DeepSeek-R1 on a Linux system, along with important details about the model variants.</p><div  class="hayden-ca11cfd12d775c01a48dd98a9c461b73 hayden-after-paragraph" id="hayden-ca11cfd12d775c01a48dd98a9c461b73"></div> <p>At the end of 2023, I wrote a similar article which you might find interesting: <a title="Install AI Models on Linux: Discover LLMs and Chatbots for Linux" href="https://linuxblog.io/install-ai-models-on-linux-discover-llms-and-chatbots-for-linux/" rel="bookmark">Install AI Models on Linux: Discover LLMs and Chatbots for Linux</a>. I will continue to expand on this guide (Update: also read <a title="DeepSeek Local: How to Self-Host DeepSeek (Privacy and Control)" href="https://linuxblog.io/deepseek-local-self-host/" rel="bookmark">How to Self-Host DeepSeek</a>). But first, here&#8217;s a no-nonsense 3-minute guide to get you up and running.*</p> <div id="ez-toc-container" class="ez-toc-v2_0_71 ez-toc-wrap-center counter-hierarchy ez-toc-counter ez-toc-custom ez-toc-container-direction"> <div class="ez-toc-title-container"> <div class="ez-toc-title" style="cursor:inherit">In This Article</div> <span class="ez-toc-title-toggle"></span></div> <nav><ul class='ez-toc-list ez-toc-list-level-1' ><li class='ez-toc-page-1 ez-toc-heading-level-2'><a class="ez-toc-link ez-toc-heading-1" href="#Prerequisites" title="Prerequisites">Prerequisites</a></li><li class='ez-toc-page-1 ez-toc-heading-level-2'><a class="ez-toc-link ez-toc-heading-2" href="#Step_1_Install_Ollama" title="Step 1: Install Ollama">Step 1: Install Ollama</a></li><li class='ez-toc-page-1 ez-toc-heading-level-2'><a class="ez-toc-link ez-toc-heading-3" href="#Step_2_Download_and_Run_DeepSeek-R1" title="Step 2: Download and Run DeepSeek-R1">Step 2: Download and Run DeepSeek-R1</a></li><li class='ez-toc-page-1 ez-toc-heading-level-2'><a class="ez-toc-link ez-toc-heading-4" href="#Step_3_Begin_Prompting_DeepSeek" title="Step 3: Begin Prompting DeepSeek">Step 3: Begin Prompting DeepSeek</a><ul class='ez-toc-list-level-3' ><li class='ez-toc-heading-level-3'><a class="ez-toc-link ez-toc-heading-5" href="#Listing_and_removing_Models" title="Listing and removing Models">Listing and removing Models</a></li></ul></li><li class='ez-toc-page-1 ez-toc-heading-level-2'><a class="ez-toc-link ez-toc-heading-6" href="#Step_4_GPU_Acceleration_Systemd_Config" title="Step 4: GPU Acceleration &amp; Systemd Config">Step 4: GPU Acceleration &amp; Systemd Config</a></li><li class='ez-toc-page-1 ez-toc-heading-level-2'><a class="ez-toc-link ez-toc-heading-7" href="#Conclusion" title="Conclusion">Conclusion</a></li></ul></nav></div> <h2><span class="ez-toc-section" id="Prerequisites"></span>Prerequisites<span class="ez-toc-section-end"></span></h2> <p><em>Note: DeepSeek-R1 is a 671B model with a <a href="https://www.ibm.com/think/topics/mixture-of-experts" target="_blank" rel="noopener">Mixture of Experts (MoE)</a> architecture requiring 1.5 TB of VRAM, making it impractical for consumer hardware. DeepSeek-R1 distilled models, like DeepSeek-R1-Distill-Qwen-7B and DeepSeek-R1-Distill-LLaMA-70B, are fine-tuned versions of open-source models like <a href="https://www.llama.com/" target="_blank" rel="noopener">LLaMA</a> and <a href="https://qwenlm.github.io/" target="_blank" rel="noopener">Qwen</a>, trained on data generated by DeepSeek-R1. Thus, inheriting DeepSeek’s reasoning capabilities while being far more efficient to self-host. Enjoy!</em></p> <p>Before diving in, ensure the following:</p> <ul> <li><strong>Operating System</strong>: Ubuntu 22.04 or a similar <a href="https://linuxblog.io/best-linux-distro/" target="_blank" rel="noopener">Linux distribution</a>. (Debian/Debian-based will make your life easier)</li> <li><strong>Hardware</strong>: Modern CPU with at least 16 GB of RAM; a dedicated GPU. (NVIDIA GPUs are already well tested)</li> <li><strong>Software</strong>: <a href="https://note.nkmk.me/en/python-sys-platform-version-info/" target="_blank" rel="noopener">Python</a> 3.8 or later, and <a href="https://git-scm.com/book/en/v2/Getting-Started-Installing-Git">Git</a> installed on your system. (Probably already installed, check first)</li> <li><strong>Free disk space: </strong>At least 10 GB of for smaller models; larger models like <code>671b</code> require significantly more!!</li> </ul> <h2><span class="ez-toc-section" id="Step_1_Install_Ollama"></span>Step 1: Install Ollama<span class="ez-toc-section-end"></span></h2> <p><img fetchpriority="high" decoding="async" class="alignnone wp-image-19601 size-full" title="curl -fsSL https://ollama.com/install.sh | sh output" src="https://static.linuxblog.io/wp-content/uploads/2025/01/curl-fsSL-https-ollama-com-install-sh-sh.png" alt="curl -fsSL https://ollama.com/install.sh | sh output" width="868" height="477" srcset="https://static.linuxblog.io/wp-content/uploads/2025/01/curl-fsSL-https-ollama-com-install-sh-sh.png 868w, https://static.linuxblog.io/wp-content/uploads/2025/01/curl-fsSL-https-ollama-com-install-sh-sh-300x165.png 300w, https://static.linuxblog.io/wp-content/uploads/2025/01/curl-fsSL-https-ollama-com-install-sh-sh-560x308.png 560w" sizes="auto" /></p> <p><a href="https://ollama.com/" target="_blank" rel="noopener">Ollama</a> is a tool designed for running AI models locally. Open your terminal and run:</p> <pre>curl -fsSL https://ollama.com/install.sh | sh</pre> <p>This command downloads and executes the Ollama installation script. During the installation, Ollama will automatically configure itself and start the required services. After the process completes, verify the installation by checking the version:</p> <pre>ollama --version</pre> <p>To check if Ollama is already running, use:</p> <pre>systemctl is-active ollama.service</pre> <p>If the output is <code>active</code>, the service is running, and you can <span style="text-decoration: underline;">skip to the next step</span>. If it’s not, start it manually:</p> <pre>sudo systemctl start ollama.service</pre> <p>To always start the service when your system boots run:</p> <pre>sudo systemctl enable ollama.service</pre> <h2><span class="ez-toc-section" id="Step_2_Download_and_Run_DeepSeek-R1"></span>Step 2: Download and Run DeepSeek-R1<span class="ez-toc-section-end"></span></h2> <p><img decoding="async" class="alignnone wp-image-19597 size-full" title="DeepSeek Linux install: Screenshot showing how to install DeepSeek." src="https://static.linuxblog.io/wp-content/uploads/2025/01/deepseek-linux-install.png" alt="DeepSeek Linux install: Screenshot showing how to install DeepSeek." width="868" height="746" srcset="https://static.linuxblog.io/wp-content/uploads/2025/01/deepseek-linux-install.png 868w, https://static.linuxblog.io/wp-content/uploads/2025/01/deepseek-linux-install-300x258.png 300w, https://static.linuxblog.io/wp-content/uploads/2025/01/deepseek-linux-install-560x481.png 560w" sizes="auto" /></p> <p>DeepSeek-R1 includes various <a href="https://huggingface.co/deepseek-ai" target="_blank" rel="noopener">distilled</a>* models fine-tuned from <a href="https://github.com/QwenLM/Qwen" target="_blank" rel="noopener">Qwen</a> and <a href="https://ai.meta.com/blog/meta-llama-3-1/" target="_blank" rel="noopener">Llama</a> architectures**, each optimized for specific performance and resource requirements. Here’s how to get started:</p> <p>To download and run the <code>7b</code> model, use the command:</p> <pre><code class="language-bash">ollama run deepseek-r1:7b  </code></pre> <p>If your system has limited resources (like mine, 16 GB RAM and only 8 GB AMD GPU), you can choose a smaller model:</p> <ul> <li><code>1.5b</code>: Minimal resource usage.</li> <li><code>7b</code>: Balanced performance and resource requirements.</li> <li><code>8b</code>, <code>14b</code>, <code>32b</code>: Intermediate options for higher performance.</li> </ul> <p>The download size for these models varies:</p> <ul> <li><strong>1.5b</strong>: ~2.3GB</li> <li><strong>7b</strong>: ~4.7GB</li> <li><strong>70b</strong>: ~40GB+</li> </ul> <p>Visit the <a href="https://ollama.com/library/deepseek-r1" target="_blank" rel="noopener">DeepSeek Model Library</a> for a complete list of models, their sizes, and details.</p> <h2><span class="ez-toc-section" id="Step_3_Begin_Prompting_DeepSeek"></span>Step 3: Begin Prompting DeepSeek<span class="ez-toc-section-end"></span></h2> <p><img decoding="async" class="alignnone wp-image-19622 size-full" title="Example prompt sent to DeepSeek running on my Linux PC." src="https://static.linuxblog.io/wp-content/uploads/2025/01/ollama-run-deepseek-r1.png" alt="Example prompt sent to DeepSeek running on my Linux PC." width="868" height="195" srcset="https://static.linuxblog.io/wp-content/uploads/2025/01/ollama-run-deepseek-r1.png 868w, https://static.linuxblog.io/wp-content/uploads/2025/01/ollama-run-deepseek-r1-300x67.png 300w, https://static.linuxblog.io/wp-content/uploads/2025/01/ollama-run-deepseek-r1-560x126.png 560w" sizes="auto" /><br /> <em>That&#8217;s it, done!</em></p> <p>Once the installation command completes, it also automatically runs DeepSeek R1, meaning there’s nothing left to configure—your setup is complete. You’ve successfully installed DeepSeek on Linux! Go ahead and enter your first prompt.</p> <p>Any time you would like to launch DeepSeek again, simply repeat the run command.</p> <h3><span class="ez-toc-section" id="Listing_and_removing_Models"></span>Listing and removing Models<span class="ez-toc-section-end"></span></h3> <p><img loading="lazy" decoding="async" class="alignnone wp-image-19604 size-full" title="ollama list screenshot" src="https://static.linuxblog.io/wp-content/uploads/2025/01/ollama-list-screenshot.png" alt="ollama list screenshot" width="868" height="125" srcset="https://static.linuxblog.io/wp-content/uploads/2025/01/ollama-list-screenshot.png 868w, https://static.linuxblog.io/wp-content/uploads/2025/01/ollama-list-screenshot-300x43.png 300w, https://static.linuxblog.io/wp-content/uploads/2025/01/ollama-list-screenshot-560x81.png 560w" sizes="auto" /></p> <p>To view all models downloaded, run the following command:</p> <pre><code class="language-bash">ollama list</code></pre> <p>To remove an installed model and free up disk space, use the following command:</p> <pre><code class="language-bash">ollama rm deepseek-r1:70b  </code></pre> <p>Replace <code>70b</code> with the appropriate model size, such as <code>7b</code> or <code>8b</code>. This will delete the specified model from your system. Once removed, you can proceed to download and run a different model. If you are looking for DeepSeek-R1 with no censorship or content restrictions, you can use <a href="https://github.com/huggingface/open-r1" target="_blank" rel="noopener">open-r1</a>.</p> <p><em><strong>Update:</strong> New screenshot added. DeepSeek offline mode on Linux:<br /> </em><img loading="lazy" decoding="async" class="alignnone wp-image-19620 size-large" title="Using DeepSeek offline on Linux. (Screenshot)" src="https://static.linuxblog.io/wp-content/uploads/2025/01/deepseek-linux-install-success-2-868x488.png" alt="Using DeepSeek offline on Linux. (Screenshot)" width="868" height="488" srcset="https://static.linuxblog.io/wp-content/uploads/2025/01/deepseek-linux-install-success-2-868x488.png 868w, https://static.linuxblog.io/wp-content/uploads/2025/01/deepseek-linux-install-success-2-300x169.png 300w, https://static.linuxblog.io/wp-content/uploads/2025/01/deepseek-linux-install-success-2-560x315.png 560w" sizes="auto" /></p> <p><em><strong>Updated: May 1st, 2025:</strong></em></p> <h2><span class="ez-toc-section" id="Step_4_GPU_Acceleration_Systemd_Config"></span>Step 4: GPU Acceleration &amp; Systemd Config<span class="ez-toc-section-end"></span></h2> <p>When you need more horsepower than the CPU alone, Ollama can leverage your GPU. But, you’ll first have to install the proper drivers and runtime. On NVIDIA systems, ensure you have CUDA and the NVIDIA driver for your card; Ollama requires a compute capability of 5.0 or higher to enable GPU inference (<a href="https://github.com/ollama/ollama/blob/main/docs/gpu.md" target="_blank" rel="noopener">ollama/docs/gpu.md at main &#8211; GitHub</a>).</p> <p>For example, on Ubuntu, you’d install the <a href="https://developer.nvidia.com/cuda-downloads?target_os=Linux" target="_blank" rel="noopener">NVIDIA toolkit</a>:</p> <pre>sudo apt install nvidia-driver-525 nvidia-cuda-toolkit</pre> <p>and verify with:</p> <pre>nvidia-smi</pre> <p>If you’re on AMD hardware, enable <a href="https://rocm.docs.amd.com/projects/install-on-linux/en/latest/" target="_blank" rel="noopener">ROCm support</a> or, for unsupported cards, you can often bypass compatibility checks by exporting <code>HSA_OVERRIDE_GFX_VERSION=&lt;major&gt;.&lt;minor&gt;</code> before starting Ollama</p> <p>&gt; Read: <a href="https://www.conroyp.com/articles/running-ollama-ubuntu-unsupported-amd-gpu-performance-guide" target="_blank" rel="noopener">Running Ollama on Ubuntu with an Unsupported AMD GPU</a>).</p> <p>Once the drivers are in place, launch Ollama with:</p> <pre> OLLAMA_CUDA=true ollama serve</pre> <p>(or the analogous ROCm env var) and watch your inference throughput climb!</p> <p>For production or long-running setups, you’ll want Ollama (and DeepSeek) to survive reboots and crash automatically. <code>systemd</code> is your friend here.</p> <p>Create <code>/etc/systemd/system/ollama.service</code> with a <code>[Service]</code> block that launches <code>ollama serve</code>, then use <code>systemctl edit ollama.service</code> to add any necessary environment variables.</p> <p>For example,<code>Environment="OLLAMA_HOST=0.0.0.0:11434"</code> or <code>Environment="OLLAMA_EXPERIMENT=client2"</code> to enable the new client-side downloader (Read <a href="https://github.com/ollama/ollama/blob/main/docs/faq.md" target="_blank" rel="noopener">ollama/docs/faq.md at main &#8211; GitHub</a>).</p> <p>After <code>systemctl daemon-reload</code> and <code>systemctl enable --now ollama</code>, your LLM server will boot itself and log to <code>journalctl -u ollama</code>.</p> <h2><span class="ez-toc-section" id="Conclusion"></span>Conclusion<span class="ez-toc-section-end"></span></h2> <p>With this guide, you’ve learned how to install DeepSeek-R1 on your Linux system and explore its versatile models. Whether you’re running the lightweight <code>1.5b</code> model or the performance-driven <code>70b</code>, DeepSeek offers cutting-edge reasoning capabilities directly on your machine. Ready to take the next step? Start experimenting with DeepSeek!</p><div  class="hayden-d82928968de529a24be1cf889d78b1a1 hayden-end-of-article" id="hayden-d82928968de529a24be1cf889d78b1a1"></div> <h3 class="tag-line" style="margin-top: 30px; padding-top: 20px; padding-bottom: 8px; border-top: 1px solid #ddd;">Tags: <a href="https://linuxblog.io/tag/ai/" rel="tag">AI</a>, <a href="https://linuxblog.io/tag/commands/" rel="tag">commands</a>, <a href="https://linuxblog.io/tag/linux/" rel="tag">linux</a></h3> <div class="custom-post-footer" style="margin-top: 0px; padding-top: 0px; padding-bottom: 0px;"> <p class="share-message"><i>Thanks for reading! Please share this article on <a href="https://www.linkedin.com/shareArticle?mini=true&#038;url=https%3A%2F%2Flinuxblog.io%2Finstall-deepseek-linux%2F&#038;title=Install+DeepSeek+on+Linux+in+3+Minutes" class="share-link" target="_blank" rel="noopener nofollow">LinkedIn↗</a>, <a href="https://twitter.com/intent/tweet?url=https%3A%2F%2Flinuxblog.io%2Finstall-deepseek-linux%2F&#038;text=Install+DeepSeek+on+Linux+in+3+Minutes" class="share-link" target="_blank" rel="noopener nofollow">X (Twitter)↗</a>, <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Flinuxblog.io%2Finstall-deepseek-linux%2F" class="share-link" target="_blank" rel="noopener nofollow">Facebook↗</a>, <a href="https://www.reddit.com/submit?url=https%3A%2F%2Flinuxblog.io%2Finstall-deepseek-linux%2F&#038;title=Install+DeepSeek+on+Linux+in+3+Minutes" class="share-link" target="_blank" rel="noopener nofollow">Reddit↗</a>, <a href="https://news.ycombinator.com/submit" target="_blank" rel="noopener nofollow">HN↗</a> or your favorite social platform. Stay updated by <a href="https://landing.mailerlite.com/webforms/landing/t2y6q4" class="additional-link" target="_blank" rel="noopener noreferrer">subscribing to our newsletter</a>, and consider <a href="https://shop.linuxcommunity.io" class="additional-link" target="_blank" rel="noopener noreferrer">grabbing a t-shirt or membership</a> to support the community. Lastly, I would like to <a href="https://linuxcommunity.io/invites/xrFmjFBFeT" class="additional-link" target="_blank" rel="noopener noreferrer">personally invite you</a> to connect with other Linux enthusiasts in our <a href="https://linuxcommunity.io/invites/xrFmjFBFeT" class="additional-link" target="_blank" rel="noopener noreferrer">community forums</a>.<br />             </i></p> </p></div> 					 											
                
                            </section>
                    <section class="feeditem">
                <h2>
                    <a
                        class="itemtitle"
                        href="https://linuxblog.io/recommended-cloudflare-performance-security-settings-guide/"
                    >Recommended Cloudflare Performance and Security Settings (Guide)</a>
                </h2>

                                    <time datetime="2025-04-29 00:00:00">
                        2025-04-29 00:00:00                    </time>
                    <p></p>
                
                
                <!-- Intentionally not escaping for html context -->
                         	        	<p>Cloudflare is a great tool for website performance and security. They have a whole suite of tools to help with performance and security and are a staple in millions of DevOps professional&#8217;s toolbox.</p><div  class="hayden-0bb6c0da91818b1fbcb5323ec19cfe79 hayden-after-paragraph" id="hayden-0bb6c0da91818b1fbcb5323ec19cfe79"></div> <p>But getting the most out of Cloudflare can be challenging. The platform has hundreds of settings and each one has its use case and impact. Navigating all those settings can be overwhelming, especially for those new to Cloudflare or less experienced in web optimization. This guide will break down each setting into 1) <strong>Function</strong>, 2) <strong>Benefit</strong>, and 3) <strong>Optimal Setting</strong>.</p> <p><em><strong>Note:</strong> I am not affiliated with nor am I compensated by Cloudflare for this guide. My insights and recommendations are based on professional experience and are meant to inform and help those looking to secure and optimize their website.</em></p> <div id="ez-toc-container" class="ez-toc-v2_0_71 ez-toc-wrap-center counter-hierarchy ez-toc-counter ez-toc-custom ez-toc-container-direction"> <div class="ez-toc-title-container"> <div class="ez-toc-title" style="cursor:inherit">In This Article</div> <span class="ez-toc-title-toggle"></span></div> <nav><ul class='ez-toc-list ez-toc-list-level-1' ><li class='ez-toc-page-1 ez-toc-heading-level-2'><a class="ez-toc-link ez-toc-heading-1" href="#Recommended_Cloudflare_Performance_Settings" title="Recommended Cloudflare Performance Settings">Recommended Cloudflare Performance Settings</a><ul class='ez-toc-list-level-3' ><li class='ez-toc-heading-level-3'><a class="ez-toc-link ez-toc-heading-2" href="#Cloudflare_%3E_Speed_%3E_Observatory" title="Cloudflare &gt; Speed &gt; Observatory">Cloudflare &gt; Speed &gt; Observatory</a></li><li class='ez-toc-page-1 ez-toc-heading-level-3'><a class="ez-toc-link ez-toc-heading-3" href="#Cloudflare_%3E_Speed_%3E_Optimization" title="Cloudflare &gt; Speed &gt; Optimization">Cloudflare &gt; Speed &gt; Optimization</a><ul class='ez-toc-list-level-4' ><li class='ez-toc-heading-level-4'><a class="ez-toc-link ez-toc-heading-4" href="#Image_Optimization" title="Image Optimization">Image Optimization</a><ul class='ez-toc-list-level-5' ><li class='ez-toc-heading-level-5'><a class="ez-toc-link ez-toc-heading-5" href="#Polish" title="Polish">Polish</a></li><li class='ez-toc-page-1 ez-toc-heading-level-5'><a class="ez-toc-link ez-toc-heading-6" href="#Mirage" title="Mirage">Mirage</a></li></ul></li><li class='ez-toc-page-1 ez-toc-heading-level-4'><a class="ez-toc-link ez-toc-heading-7" href="#Protocol_Optimization" title="Protocol Optimization">Protocol Optimization</a><ul class='ez-toc-list-level-5' ><li class='ez-toc-heading-level-5'><a class="ez-toc-link ez-toc-heading-8" href="#HTTP2" title="HTTP/2">HTTP/2</a></li><li class='ez-toc-page-1 ez-toc-heading-level-5'><a class="ez-toc-link ez-toc-heading-9" href="#HTTP3" title="HTTP/3">HTTP/3</a></li><li class='ez-toc-page-1 ez-toc-heading-level-5'><a class="ez-toc-link ez-toc-heading-10" href="#HTTP2_to_Origin" title="HTTP/2 to Origin">HTTP/2 to Origin</a></li><li class='ez-toc-page-1 ez-toc-heading-level-5'><a class="ez-toc-link ez-toc-heading-11" href="#Enhanced_HTTP2_Prioritization" title="Enhanced HTTP/2 Prioritization">Enhanced HTTP/2 Prioritization</a></li><li class='ez-toc-page-1 ez-toc-heading-level-5'><a class="ez-toc-link ez-toc-heading-12" href="#Brotli" title="Brotli">Brotli</a></li><li class='ez-toc-page-1 ez-toc-heading-level-5'><a class="ez-toc-link ez-toc-heading-13" href="#0-RTT_Connection_Resumption" title="0-RTT Connection Resumption">0-RTT Connection Resumption</a></li><li class='ez-toc-page-1 ez-toc-heading-level-5'><a class="ez-toc-link ez-toc-heading-14" href="#Always_use_HTTPS" title="Always use HTTPS">Always use HTTPS</a></li><li class='ez-toc-page-1 ez-toc-heading-level-5'><a class="ez-toc-link ez-toc-heading-15" href="#TLS_13" title="TLS 1.3">TLS 1.3</a></li></ul></li><li class='ez-toc-page-1 ez-toc-heading-level-4'><a class="ez-toc-link ez-toc-heading-16" href="#Tool_Enhancements" title="Tool Enhancements">Tool Enhancements</a><ul class='ez-toc-list-level-5' ><li class='ez-toc-heading-level-5'><a class="ez-toc-link ez-toc-heading-17" href="#Early_Hints" title="Early Hints">Early Hints</a></li></ul></li></ul></li><li class='ez-toc-page-1 ez-toc-heading-level-3'><a class="ez-toc-link ez-toc-heading-18" href="#Cloudflare_%3E_Caching_%3E_Configuration" title="Cloudflare &gt; Caching &gt; Configuration">Cloudflare &gt; Caching &gt; Configuration</a><ul class='ez-toc-list-level-4' ><li class='ez-toc-heading-level-4'><a class="ez-toc-link ez-toc-heading-19" href="#Purge_Cache" title="Purge Cache">Purge Cache</a></li><li class='ez-toc-page-1 ez-toc-heading-level-4'><a class="ez-toc-link ez-toc-heading-20" href="#Caching_Level" title="Caching Level">Caching Level</a></li><li class='ez-toc-page-1 ez-toc-heading-level-4'><a class="ez-toc-link ez-toc-heading-21" href="#Browser_Cache_TTL" title="Browser Cache TTL">Browser Cache TTL</a></li></ul></li><li class='ez-toc-page-1 ez-toc-heading-level-3'><a class="ez-toc-link ez-toc-heading-22" href="#Cloudflare_%3E_Caching_%3E_Tiered_Cache_Topology" title="Cloudflare &gt; Caching &gt; Tiered Cache Topology">Cloudflare &gt; Caching &gt; Tiered Cache Topology</a><ul class='ez-toc-list-level-4' ><li class='ez-toc-heading-level-4'><a class="ez-toc-link ez-toc-heading-23" href="#Who_Should_Enable_It" title="Who Should Enable It">Who Should Enable It</a></li><li class='ez-toc-page-1 ez-toc-heading-level-4'><a class="ez-toc-link ez-toc-heading-24" href="#Who_Should_Leave_It_Off" title="Who Should Leave It Off">Who Should Leave It Off</a></li></ul></li><li class='ez-toc-page-1 ez-toc-heading-level-3'><a class="ez-toc-link ez-toc-heading-25" href="#Cloudflare_%3E_Traffic_%3E_Argo_Smart_Routing" title="Cloudflare &gt; Traffic &gt; Argo Smart Routing">Cloudflare &gt; Traffic &gt; Argo Smart Routing</a></li><li class='ez-toc-page-1 ez-toc-heading-level-3'><a class="ez-toc-link ez-toc-heading-26" href="#Cloudflare_%3E_Rules_%3E_Page_Rules" title="Cloudflare &gt; Rules &gt; Page Rules">Cloudflare &gt; Rules &gt; Page Rules</a></li></ul></li><li class='ez-toc-page-1 ez-toc-heading-level-2'><a class="ez-toc-link ez-toc-heading-27" href="#Recommended_Cloudflare_Security_Settings" title="Recommended Cloudflare Security Settings">Recommended Cloudflare Security Settings</a><ul class='ez-toc-list-level-3' ><li class='ez-toc-heading-level-3'><a class="ez-toc-link ez-toc-heading-28" href="#Cloudflare_%3E_Security_%3E_Settings" title="Cloudflare &gt; Security &gt; Settings">Cloudflare &gt; Security &gt; Settings</a><ul class='ez-toc-list-level-4' ><li class='ez-toc-heading-level-4'><a class="ez-toc-link ez-toc-heading-29" href="#Security_Level" title="Security Level">Security Level</a></li><li class='ez-toc-page-1 ez-toc-heading-level-4'><a class="ez-toc-link ez-toc-heading-30" href="#Challenge_Passage" title="Challenge Passage">Challenge Passage</a></li><li class='ez-toc-page-1 ez-toc-heading-level-4'><a class="ez-toc-link ez-toc-heading-31" href="#Browser_Integrity_Check" title="Browser Integrity Check">Browser Integrity Check</a></li></ul></li><li class='ez-toc-page-1 ez-toc-heading-level-3'><a class="ez-toc-link ez-toc-heading-32" href="#Cloudflare_%3E_Security_%3E_Events" title="Cloudflare &gt; Security &gt; Events">Cloudflare &gt; Security &gt; Events</a></li><li class='ez-toc-page-1 ez-toc-heading-level-3'><a class="ez-toc-link ez-toc-heading-33" href="#Cloudflare_%3E_Security_%3E_WAF_Web_Application_Firewall" title="Cloudflare &gt; Security &gt; WAF (Web Application Firewall)">Cloudflare &gt; Security &gt; WAF (Web Application Firewall)</a><ul class='ez-toc-list-level-4' ><li class='ez-toc-heading-level-4'><a class="ez-toc-link ez-toc-heading-34" href="#Custom_rules" title="Custom rules">Custom rules</a></li><li class='ez-toc-page-1 ez-toc-heading-level-4'><a class="ez-toc-link ez-toc-heading-35" href="#Rate_Limiting_Rules" title="Rate Limiting Rules">Rate Limiting Rules</a><ul class='ez-toc-list-level-5' ><li class='ez-toc-heading-level-5'><a class="ez-toc-link ez-toc-heading-36" href="#Recommended_approach_when_adding_WAF_rules" title="Recommended approach when adding WAF rules">Recommended approach when adding WAF rules</a></li></ul></li><li class='ez-toc-page-1 ez-toc-heading-level-4'><a class="ez-toc-link ez-toc-heading-37" href="#Managed_Rules" title="Managed Rules">Managed Rules</a><ul class='ez-toc-list-level-5' ><li class='ez-toc-heading-level-5'><a class="ez-toc-link ez-toc-heading-38" href="#Best_Practices_for_Managed_Rules_Implementation" title="Best Practices for Managed Rules Implementation">Best Practices for Managed Rules Implementation</a></li></ul></li><li class='ez-toc-page-1 ez-toc-heading-level-4'><a class="ez-toc-link ez-toc-heading-39" href="#WAF_Tools" title="WAF Tools">WAF Tools</a></li></ul></li><li class='ez-toc-page-1 ez-toc-heading-level-3'><a class="ez-toc-link ez-toc-heading-40" href="#Cloudflare_%3E_Security_%3E_Bots" title="Cloudflare &gt; Security &gt; Bots">Cloudflare &gt; Security &gt; Bots</a></li><li class='ez-toc-page-1 ez-toc-heading-level-3'><a class="ez-toc-link ez-toc-heading-41" href="#Cloudflare_%3E_DNS_%3E_Settings_%3E_DNSSEC" title="Cloudflare &gt; DNS &gt; Settings &gt; DNSSEC">Cloudflare &gt; DNS &gt; Settings &gt; DNSSEC</a></li><li class='ez-toc-page-1 ez-toc-heading-level-3'><a class="ez-toc-link ez-toc-heading-42" href="#Cloudflare_%3E_SSLTLS" title="Cloudflare &gt; SSL/TLS">Cloudflare &gt; SSL/TLS</a><ul class='ez-toc-list-level-4' ><li class='ez-toc-heading-level-4'><a class="ez-toc-link ez-toc-heading-43" href="#Edge_Certificates" title="Edge Certificates">Edge Certificates</a><ul class='ez-toc-list-level-5' ><li class='ez-toc-heading-level-5'><a class="ez-toc-link ez-toc-heading-44" href="#Always_Use_HTTPS" title="Always Use HTTPS">Always Use HTTPS</a></li><li class='ez-toc-page-1 ez-toc-heading-level-5'><a class="ez-toc-link ez-toc-heading-45" href="#HTTP_Strict_Transport_Security_HSTS" title="HTTP Strict Transport Security (HSTS)">HTTP Strict Transport Security (HSTS)</a></li><li class='ez-toc-page-1 ez-toc-heading-level-5'><a class="ez-toc-link ez-toc-heading-46" href="#Minimum_TLS_Version" title="Minimum TLS Version">Minimum TLS Version</a></li><li class='ez-toc-page-1 ez-toc-heading-level-5'><a class="ez-toc-link ez-toc-heading-47" href="#Opportunistic_Encryption" title="Opportunistic Encryption">Opportunistic Encryption</a></li><li class='ez-toc-page-1 ez-toc-heading-level-5'><a class="ez-toc-link ez-toc-heading-48" href="#TLS_13-2" title="TLS 1.3">TLS 1.3</a></li><li class='ez-toc-page-1 ez-toc-heading-level-5'><a class="ez-toc-link ez-toc-heading-49" href="#Automatic_HTTPS_Rewrites" title="Automatic HTTPS Rewrites">Automatic HTTPS Rewrites</a></li></ul></li></ul></li><li class='ez-toc-page-1 ez-toc-heading-level-3'><a class="ez-toc-link ez-toc-heading-50" href="#Cloudflare_%3E_Security_%3E_DDoS" title="Cloudflare &gt; Security &gt; DDoS">Cloudflare &gt; Security &gt; DDoS</a></li><li class='ez-toc-page-1 ez-toc-heading-level-3'><a class="ez-toc-link ez-toc-heading-51" href="#Cloudflare_%3E_Security_%3E_Page_Shield" title="Cloudflare &gt; Security &gt; Page Shield">Cloudflare &gt; Security &gt; Page Shield</a></li></ul></li><li class='ez-toc-page-1 ez-toc-heading-level-2'><a class="ez-toc-link ez-toc-heading-52" href="#Conclusion" title="Conclusion">Conclusion</a></li></ul></nav></div> <h2><span class="ez-toc-section" id="Recommended_Cloudflare_Performance_Settings"></span>Recommended Cloudflare Performance Settings<span class="ez-toc-section-end"></span></h2> <p>Website speed can kill user engagement, while security threats are everywhere. Cloudflare provides a layer of protection and speed that’s hard to overstate. From small blogs to enterprise websites, the impact of well-configured Cloudflare settings is huge: Faster page loads, better user experience, more security.</p> <p>As we dive into these optimization settings, we will also highlight some of Cloudflare’s noteworthy features, starting with one of its most powerful tools: the Speed Observatory. This is a testament to Cloudflare’s commitment to not just providing tools for performance, but also solutions to measuring and analyzing our results.</p> <h3><span class="ez-toc-section" id="Cloudflare_%3E_Speed_%3E_Observatory"></span>Cloudflare &gt; Speed &gt; Observatory<span class="ez-toc-section-end"></span></h3> <p><img fetchpriority="high" decoding="async" class="alignnone wp-image-17997 size-full" title="Cloudflare Speed Observatory" src="https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-speed-observatory-pagespeed-test.png" alt="Cloudflare Speed Observatory" width="868" height="597" srcset="https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-speed-observatory-pagespeed-test.png 868w, https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-speed-observatory-pagespeed-test-300x206.png 300w, https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-speed-observatory-pagespeed-test-560x385.png 560w" sizes="auto" /></p> <p>The Speed Observatory offers a comprehensive view of your website&#8217;s performance, laying the groundwork for informed decisions on configuration adjustments. This tool is not just about speed metrics; it&#8217;s a gateway to understanding the performance of your website in a detailed and actionable way.</p> <p>As an alternative, you can also use <a href="https://pagespeed.web.dev/" target="_blank" rel="noopener">pagespeed.web.dev</a>—which Cloudflare provides a link to as well.</p> <ul> <li><strong>Function: </strong>Monitors website speed and performance metrics.</li> <li><strong>Benefit: </strong>Identifies areas for improvement, encourages enhancement of user experience.</li> <li><strong>Optimal Setting:</strong> Enable the &#8220;Daily&#8221; testing feature.</li> </ul> <p><img decoding="async" class="alignnone wp-image-17999 size-full" title="Enable the &quot;Daily&quot; testing feature." src="https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-enable-daily-speed-test.png" alt="Enable the &quot;Daily&quot; testing feature." width="868" height="60" srcset="https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-enable-daily-speed-test.png 868w, https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-enable-daily-speed-test-300x21.png 300w, https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-enable-daily-speed-test-560x39.png 560w" sizes="auto" /></p> <p>&nbsp;</p> <h3><span class="ez-toc-section" id="Cloudflare_%3E_Speed_%3E_Optimization"></span>Cloudflare &gt; Speed &gt; Optimization<span class="ez-toc-section-end"></span></h3> <p><img decoding="async" class="alignnone wp-image-17998 size-full" title="Cloudflare &gt; Speed &gt; Optimization" src="https://static.linuxblog.io/wp-content/uploads/2023/12/Cloudflare-speed-performance-optimization-settings.png" alt="Cloudflare &gt; Speed &gt; Optimization" width="868" height="614" srcset="https://static.linuxblog.io/wp-content/uploads/2023/12/Cloudflare-speed-performance-optimization-settings.png 868w, https://static.linuxblog.io/wp-content/uploads/2023/12/Cloudflare-speed-performance-optimization-settings-300x212.png 300w, https://static.linuxblog.io/wp-content/uploads/2023/12/Cloudflare-speed-performance-optimization-settings-560x396.png 560w" sizes="auto" /></p> <p>Cloudflare &gt; Speed &gt; Optimization allows you to apply various image and protocol enhancements that work together to reduce load times and improve user experience. Let’s break them down:</p> <h4><span class="ez-toc-section" id="Image_Optimization"></span><strong>Image Optimization</strong><span class="ez-toc-section-end"></span></h4> <h5><span class="ez-toc-section" id="Polish"></span>Polish<span class="ez-toc-section-end"></span></h5> <p>Automatically optimizes image loading by compressing pictures without sacrificing visual quality. Although I recommend enabling this setting, there&#8217;s no need to enable it if you are already serving images in optimized formats (AVIF &amp; WEBP) from your origin server.</p> <p>In my case, I&#8217;m serving images already optimized via my <a href="https://linuxblog.io/nginx-tuning-tips-tls-ssl-https-ttfb-latency/" target="_blank" rel="noopener">Nginx</a> web server. However, in this case, a paid account (Pro or higher) is still required. This is because the Cloudflare free plan does not support the Accept header (read: <a href="https://blog.cloudflare.com/vary-for-images-serve-the-correct-images-to-the-correct-browsers/" target="_blank" rel="noopener">Vary for Images: Serve the Correct Images to the Correct Browsers</a> by Cloudflare). Available &#8220;Vary for Images&#8221; in your Cloudflare plan is necessary to use Cloudflare CDN Caching when loading WebP and AVIF files from your origin server.</p> <ul> <li><strong>Function:</strong> Compresses images, strips metadata.</li> <li><strong>Benefit:</strong> Reduces image file size, speeds up loading.</li> <li><strong>Optimal Setting:</strong> Enabled + lossy compression for fastest speeds.</li> </ul> <h5><span class="ez-toc-section" id="Mirage"></span>Mirage<span class="ez-toc-section-end"></span></h5> <p>Improves image loading on mobile devices and slow network connections. Replaces images with low-resolution placeholder images that have the same dimensions as the original (including third-party images).</p> <p>Once the page renders completely, full resolution images are then lazy-loaded (prioritizing images in the browser viewport). This process allows pages to render quickly and minimizes browser reflow.</p> <p>It also combines multiple individual network requests for images into a single request. Mirage also features lazy-loading. I found this particularly useful for the lazy loading of images on pages like: <a title="100 Top Observability Tools (+ Server Monitoring and APM solutions)" href="https://linuxblog.io/20-top-server-monitoring-application-performance-monitoring-apm-solutions/" rel="bookmark">100 Top Observability Tools (+ Server Monitoring and APM solutions)</a> which has over 100 images.</p> <ul> <li><strong>Function:</strong> Lazy loads and virtualizes images.</li> <li><strong>Benefit:</strong> Enhances mobile and slow connection performance.</li> <li><strong>Optimal Setting:</strong> Enable for mobile-focused or image-heavy sites.</li> </ul> <h4><span class="ez-toc-section" id="Protocol_Optimization"></span><strong>Protocol Optimization</strong><span class="ez-toc-section-end"></span></h4> <h5><span class="ez-toc-section" id="HTTP2"></span>HTTP/2<span class="ez-toc-section-end"></span></h5> <p>Utilizes the modern HTTP/2 protocol for improved loading efficiency over traditional HTTP. Don&#8217;t forget to make this improvement on your origin server as well. See this article: <a href="https://linuxblog.io/nginx-tuning-tips-tls-ssl-https-ttfb-latency/#Enable_HTTP2_and_HTTP3_QUIC_on_Nginx" target="_blank" rel="noopener">Enable HTTP/2 and HTTP/3 &amp; QUIC on Nginx</a>.</p> <ul> <li><strong>Function:</strong> Allows multiplexing, server push.</li> <li><strong>Benefit:</strong> Parallel resource loading, faster delivery.</li> <li><strong>Optimal Setting:</strong> Enabled, as it&#8217;s broadly supported.</li> </ul> <h5><span class="ez-toc-section" id="HTTP3"></span>HTTP/3<span class="ez-toc-section-end"></span></h5> <p>Enables the latest internet protocol, further enhancing speed and reliability.</p> <ul> <li><strong>Function:</strong> Introduces QUIC for reduced latency.</li> <li><strong>Benefit:</strong> Improves mobile network performance.</li> <li><strong>Optimal Setting:</strong> Enabled. Particularly for mobile users.</li> </ul> <h5><span class="ez-toc-section" id="HTTP2_to_Origin"></span>HTTP/2 to Origin<span class="ez-toc-section-end"></span></h5> <p>If the toggle is disabled, or your origin server does not support HTTP/2, Cloudflare will initiate a slower HTTP/1.1 connection to your orgin. As such, make sure to enable HTTP/2 on your orginal as per above link.</p> <ul> <li><strong>Function:</strong> Extends HTTP/2 benefits to origin server.</li> <li><strong>Benefit:</strong> Speed. Reduces connection overhead.</li> <li><strong>Optimal Setting:</strong> Enable if origin server supports HTTP/2.</li> </ul> <h5><span class="ez-toc-section" id="Enhanced_HTTP2_Prioritization"></span>Enhanced HTTP/2 Prioritization<span class="ez-toc-section-end"></span></h5> <p>With Enhanced HTTP/2 Prioritization enabled, resources will be delivered in the optimal order for the fastest experience across all browsers. See: <a href="https://blog.cloudflare.com/better-http-2-prioritization-for-a-faster-web/" target="_blank" rel="noopener">Cloudflare blog post.</a></p> <ul> <li><strong>Function:</strong> Optimizes resource delivery order.</li> <li><strong>Benefit:</strong> Faster perceived load times.</li> <li><strong>Optimal Setting:</strong> Enabled. Especially for intricate resource loading.</li> </ul> <h5><span class="ez-toc-section" id="Brotli"></span>Brotli<span class="ez-toc-section-end"></span></h5> <p>Implements Brotli compression for reduced file sizes and faster content delivery. See <a href="https://developers.cloudflare.com/speed/optimization/content/brotli/content-compression/" target="_blank" rel="noopener">How does Cloudflare compress content?</a></p> <ul> <li><strong>Function:</strong> Compresses files more effectively than Gzip.</li> <li><strong>Benefit:</strong> Reduced file sizes, faster downloads.</li> <li><strong>Optimal Setting:</strong> Enabled.</li> </ul> <h5><span class="ez-toc-section" id="0-RTT_Connection_Resumption"></span>0-RTT Connection Resumption<span class="ez-toc-section-end"></span></h5> <p>Enabling 0-RTT Connection Resumption allows for faster subsequent connections by permitting clients to send encrypted data to the server during the initial handshake, before the connection has been fully established. The &#8220;0-RTT&#8221; stands for &#8220;zero round-trip time,&#8221; meaning that data can be sent without waiting for the handshake to complete, which usually takes one full round-trip (1-RTT).</p> <p>There is a security trade-off because this can expose the connection to replay attacks. In a replay attack, an attacker intercepts the 0-RTT data and replays it to the server. Since the server accepts 0-RTT data without a completed handshake, it can’t be sure if the data was sent in a new connection or simply replayed by an attacker. The data sent during the 0-RTT phase is not protected by the full TLS 1.3 handshake’s forward secrecy guarantees.</p> <p>That being said, the risk of such an attack may be acceptable for non-sensitive data. So only use 0-RTT for requests that don’t change the state on the server if they were to be replayed (like GET requests in HTTP). For state changing requests (like POST) it’s safer to wait for the full handshake to complete.</p> <p>Also, read: <a href="https://blog.cloudflare.com/even-faster-connection-establishment-with-quic-0-rtt-resumption/" target="_blank" rel="noopener">Even faster connection establishment with QUIC 0-RTT resumption</a>.</p> <ul> <li><strong>Function:</strong> Speeds up connections.</li> <li><strong>Benefit:</strong> Faster repeat visit load times.</li> <li><strong>Optimal Setting:</strong> Enable, with awareness of slight security trade-off.</li> </ul> <h5><span class="ez-toc-section" id="Always_use_HTTPS"></span>Always use HTTPS<span class="ez-toc-section-end"></span></h5> <p>301 redirects all &#8220;http&#8221; traffic ti &#8220;https&#8221;.</p> <ul> <li><strong>Function:</strong> Redirects all traffic to HTTPS.</li> <li><strong>Benefit:</strong> Secures and potentially speeds up connections.</li> <li><strong>Optimal Setting:</strong> Enable, to leverage HTTP/2 optimizations.</li> </ul> <h5><span class="ez-toc-section" id="TLS_13"></span>TLS 1.3<span class="ez-toc-section-end"></span></h5> <p>Activates the most recent version of TLS, ensuring enhanced <a href="https://blog.codavel.com/tls-1.3-the-new-security-king" target="_blank" rel="noopener">security and speed</a>.</p> <ul> <li><strong>Function:</strong> Streamlines the TLS handshake process.</li> <li><strong>Benefit:</strong> Enhanced security, reduced connection time.</li> <li><strong>Optimal Setting:</strong> Enable for cutting-edge security and speed.</li> </ul> <h4><span class="ez-toc-section" id="Tool_Enhancements"></span>Tool Enhancements<span class="ez-toc-section-end"></span></h4> <h5><span class="ez-toc-section" id="Early_Hints"></span>Early Hints<span class="ez-toc-section-end"></span></h5> <p>Sends preliminary resource hints to browsers to initiate early page resource fetches. See Cloudflare&#8217;s <a href="https://blog.cloudflare.com/early-hints" target="_blank" rel="noopener">blog annoucnement</a>.</p> <ul> <li><strong>Function:</strong> Preloads critical resources early.</li> <li><strong>Benefit:</strong> Shortens time to first paint.</li> <li><strong>Optimal Setting:</strong> Enable, to anticipate resource loading.</li> </ul> <p>The optimal settings provided above are general recommendations. The actual best setting may vary depending on the specific nature of your website, including your content, audience, and their typical connection types. It is always wise to test changes and monitor their impact through tools like Cloudflare&#8217;s Speed Observatory to ensure they are providing the desired benefits.</p> <p><img loading="lazy" decoding="async" class="alignnone wp-image-18004 size-full" title="Cloudflare &gt; Speed &gt; Optimization enabled" src="https://static.linuxblog.io/wp-content/uploads/2023/12/Cloudflare-speed-performance-optimization-settings-2.png" alt="Cloudflare &gt; Speed &gt; Optimization enabled" width="868" height="374" srcset="https://static.linuxblog.io/wp-content/uploads/2023/12/Cloudflare-speed-performance-optimization-settings-2.png 868w, https://static.linuxblog.io/wp-content/uploads/2023/12/Cloudflare-speed-performance-optimization-settings-2-300x129.png 300w, https://static.linuxblog.io/wp-content/uploads/2023/12/Cloudflare-speed-performance-optimization-settings-2-560x241.png 560w" sizes="auto" /></p> <p>By configuring each of these settings, users can significantly boost their website&#8217;s performance metrics. However, the key is not just to enable these features but to understand if they benifit to the specific needs of your website.</p> <h3><span class="ez-toc-section" id="Cloudflare_%3E_Caching_%3E_Configuration"></span>Cloudflare &gt; Caching &gt; Configuration<span class="ez-toc-section-end"></span></h3> <p><img loading="lazy" decoding="async" class="alignnone wp-image-18069 size-full" title="Cloudflare &gt; Caching &gt; Configuration" src="https://static.linuxblog.io/wp-content/uploads/2023/12/Cloudflare-caching-configuration.png" alt="Cloudflare &gt; Caching &gt; Configuration" width="868" height="618" srcset="https://static.linuxblog.io/wp-content/uploads/2023/12/Cloudflare-caching-configuration.png 868w, https://static.linuxblog.io/wp-content/uploads/2023/12/Cloudflare-caching-configuration-300x214.png 300w, https://static.linuxblog.io/wp-content/uploads/2023/12/Cloudflare-caching-configuration-560x399.png 560w" sizes="auto" /></p> <p>The Cache Configuration of Cloudflare UI is where you can tailor the caching behavior to optimize the performance of your website. Above you&#8217;ll see options for purging the cache, setting the caching level and browser cache TTL (Time to Live).</p> <h4><span class="ez-toc-section" id="Purge_Cache"></span>Purge Cache<span class="ez-toc-section-end"></span></h4> <p>This feature allows you to clear the cached content. Using &#8220;Custom Purge&#8221; enables you to selectively clear specific files or paths from Cloudflare&#8217;s cache, which is preferable because it allows you to remove only the outdated or changed content without affecting the rest of the cached data. On the other hand, &#8220;Purge Everything&#8221; clears the entire cache, forcing Cloudflare to refetch resources from the origin server, which will temporarily degrade your website&#8217;s performance.</p> <ul> <li><strong>Recommendation:</strong> Only use &#8220;Purge Everything&#8221; if there are substantial changes across the entire site that necessitate a complete refresh.</li> </ul> <h4><span class="ez-toc-section" id="Caching_Level"></span>Caching Level<span class="ez-toc-section-end"></span></h4> <p>This setting determines how Cloudflare caches the static content of your site. The options are &#8220;No query string,&#8221; &#8220;Ignore query string,&#8221; and &#8220;Standard.&#8221; The &#8220;Standard&#8221; setting will cache resources based on the filename and query string, which works well for most websites.</p> <ul> <li><strong>Optimal Setting</strong>: &#8220;Standard&#8221; for typical use cases, adjusting as needed based on how your site uses query strings. That said, use custom rules to adjust sub domains, directories etc.</li> </ul> <h4><span class="ez-toc-section" id="Browser_Cache_TTL"></span>Browser Cache TTL<span class="ez-toc-section-end"></span></h4> <p>This setting specifies how long Cloudflare instructs a visitor&#8217;s browser to cache files. A longer TTL means that the browser will store the files for more extended periods, reducing the number of requests to Cloudflare&#8217;s servers.</p> <ul> <li><strong>Function</strong>: Directs the browser on how long to locally cache files.</li> <li><strong>Benefits</strong>: Reduces load times for repeat visitors and decreases bandwidth usage and server requests.</li> <li><strong>Optimal Setting</strong>: Respect existing headers. Or, adjust based on content update frequency—longer TTL for static content, shorter for dynamic.</li> </ul> <p>No need to play around much with the other setting on this page. I usually enable &#8220;Always Online.&#8221;</p> <h3><span class="ez-toc-section" id="Cloudflare_%3E_Caching_%3E_Tiered_Cache_Topology"></span>Cloudflare &gt; Caching &gt; Tiered Cache Topology<span class="ez-toc-section-end"></span></h3> <p><img loading="lazy" decoding="async" class="alignnone wp-image-18009 size-full" title="Cloudflare &gt; Caching &gt; Tiered Cache Topology" src="https://static.linuxblog.io/wp-content/uploads/2023/12/Cloudflare-Enable-Smart-Caching-Topology.png" alt="Cloudflare &gt; Caching &gt; Tiered Cache Topology" width="868" height="557" srcset="https://static.linuxblog.io/wp-content/uploads/2023/12/Cloudflare-Enable-Smart-Caching-Topology.png 868w, https://static.linuxblog.io/wp-content/uploads/2023/12/Cloudflare-Enable-Smart-Caching-Topology-300x193.png 300w, https://static.linuxblog.io/wp-content/uploads/2023/12/Cloudflare-Enable-Smart-Caching-Topology-560x359.png 560w" sizes="auto" /></p> <p>The Tiered Cache Topology in Cloudflare is an advanced feature to optimize content delivery by structuring the cache hierarchy across the Cloudflare network. This is especially good for websites with a global audience and static content that need to manage their origin server’s load and bandwidth consumption.</p> <p>Low traffic sites won’t benefit much from tiered caching, since the volume of requests won’t be enough to justify the complexity or cost of a tiered caching system. The main benefit of tiered caching is reducing load on the origin server, which shouldn’t be a big concern for smaller sites.</p> <p>Lastly, if most of the traffic is local, the content is already being served from the nearest data center, which minimizes the latency benefits of tiered caching. Tiered caching is most effective when there’s high traffic and high cache hit rate from multiple global regions. Small local sites won’t have enough traffic to populate the cache across multiple points of presence.</p> <h4><span class="ez-toc-section" id="Who_Should_Enable_It"></span>Who Should Enable It<span class="ez-toc-section-end"></span></h4> <ul> <li>Websites with high traffic volumes and global reach should enable Smart Tiered Caching. It is especially useful for sites that serve a large amount of static content (like images, CSS, and JavaScript files) that can be cached and delivered quickly from a local data center.</li> <li>Websites that frequently update content but still want to benefit from caching without overwhelming the origin with requests.</li> </ul> <h4><span class="ez-toc-section" id="Who_Should_Leave_It_Off"></span>Who Should Leave It Off<span class="ez-toc-section-end"></span></h4> <ul> <li>Small websites with low traffic that primarily serve a local or regional audience may not see significant benefits.</li> <li>Sites where content is highly dynamic and personalized, where caching would not be beneficial or might lead to stale content being served.</li> </ul> <p>In essence, the cost-benefit ratio of enabling advanced caching features like Tiered Cache Topology may not be favorable for small, regionally focused websites with modest traffic levels.</p> <ul> <li><strong>Function:</strong> Tiered Cache leverages Cloudflare&#8217;s regional data centers to cache content intelligently, reducing requests to the origin server.</li> <li><strong>Benefit:</strong> Reduces origin server load, saves bandwidth, and improves content delivery speed by serving from closer caches.</li> <li><strong>Optimal Setting:</strong> For high-traffic sites, enable Smart Tiered Caching to maximize cache efficiency and reduce latency. For smaller, low-traffic sites, or those with highly dynamic content, it may be optimal to disable it to ensure the most up-to-date content is served without unnecessary complexity.</li> </ul> <h3><span class="ez-toc-section" id="Cloudflare_%3E_Traffic_%3E_Argo_Smart_Routing"></span>Cloudflare &gt; Traffic &gt; Argo Smart Routing<span class="ez-toc-section-end"></span></h3> <p><img loading="lazy" decoding="async" class="alignnone wp-image-18010 size-full" title="Cloudflare &gt; Argo Smart Routing" src="https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-enable-argo.png" alt="Cloudflare &gt; Argo Smart Routing" width="868" height="408" srcset="https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-enable-argo.png 868w, https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-enable-argo-300x141.png 300w, https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-enable-argo-560x263.png 560w" sizes="auto" /></p> <p>Argo Smart Routing is a Cloudflare service designed to improve the performance of web traffic delivery by intelligently routing visitors through the fastest paths across Cloudflare&#8217;s global network. By analyzing the conditions of the network in real-time, Argo chooses the most efficient route, avoiding congestion and reducing latency.</p> <p>For an additional look at Cloudflare Argo, please read my blog post &#8220;<a href="https://linuxblog.io/is-cloudflare-argo-worth-it/" target="_blank" rel="noopener">Is Cloudflare Argo Worth It</a>?&#8221; The article offers a nuanced look at how Argo&#8217;s benefits stack up against its costs. It&#8217;s evident that Argo can significantly enhance a website&#8217;s responsiveness, making it an asset for webmasters aiming to offer the best user experience possible.</p> <ul> <li><strong>Function:</strong> Argo Smart Routing dynamically selects the quickest paths for web traffic, reducing transit time.</li> <li><strong>Benefit:</strong> Minimizes latency (TTFB), improves load times, and enhances overall website performance.</li> <li><strong>Optimal Setting:</strong> Enable Argo for sites where speed is critical, and the audience is globally distributed; more beneficial for high-traffic sites where user experience is paramount.</li> </ul> <h3><span class="ez-toc-section" id="Cloudflare_%3E_Rules_%3E_Page_Rules"></span>Cloudflare &gt; Rules &gt; Page Rules<span class="ez-toc-section-end"></span></h3> <p><img loading="lazy" decoding="async" class="alignnone wp-image-18015 size-full" title="Cloudflare &gt; Rules &gt; Page Rules" src="https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-page-rules.png" alt="Cloudflare &gt; Rules &gt; Page Rules" width="868" height="418" srcset="https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-page-rules.png 868w, https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-page-rules-300x144.png 300w, https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-page-rules-560x270.png 560w" sizes="auto" /></p> <p>Page Rules in Cloudflare allow you to customize Cloudflare&#8217;s settings on a per-URL basis. This flexibility can fine-tune the behavior of your website, improve security, and enhance performance for different sections of your site. Here&#8217;s an overview of the rules I have configured above:<br /> <em>(Note: these are specific for WordPress websites but can be tweaked accordingly.)</em></p> <ol> <li>The rule for <code>static.domain.com/*</code> is set to cache all content, with a long Edge Cache TTL (Time to Live) of one month. This rule ensures that all static assets (CSS, JS, PNG, JPG, MP4, etc.) served from this subdomain are cached by Cloudflare and kept for an extended period and regardless of query strings, thus reducing the load on the origin server and speeding up content delivery to users.</li> <li><strong>Enhanced Security for Admin Area</strong>: The rule for <code>domain.com/wp-admin/*</code> increases the security level to High. This protects the WordPress admin area by adding additional security checks, helping to prevent unauthorized access and potential attacks.</li> <li><strong>Under Attack Mode for Login</strong>: The rule for <code>domain.com/wp-login.php*</code> sets the security level to &#8220;I&#8217;m Under Attack,&#8221; which is a more aggressive form of protection. This mode challenges all visitors with a JavaScript computation check to filter out bots, protecting against brute force login attempts. Remember, you should also set rate limiting not only via Cloudflare but also via Nginx or whatever web server you are using</li> <li><strong>Under Attack Mode for Specific Paths</strong>: This rule applies to <code>domain.com/connect/</code> or any webform being abused by spam/malware bots. Set the security level to &#8220;I&#8217;m Under Attack.&#8221; This could be a response to specific threats or vulnerabilities associated with this path, necessitating heightened security measures.</li> </ol> <ul> <li><strong>Function:</strong> Each rule is designed to apply specific security or caching policies to different parts of a website based on the URL pattern.</li> <li><strong>Benifit:</strong> Enhances site performance by caching, secures sensitive areas, and protects against attacks in real-time.</li> <li><strong>Optimal Configuration: </strong><span style="text-decoration: underline;">For static paths:</span> &#8220;Cache Everything&#8221; (test compatibility/benefit) and a long TTL to maximize cache usage. <span style="text-decoration: underline;">For sensitive areas like admin and login pages</span>: Increased security levels tailored to the perceived threat level. <span style="text-decoration: underline;">For areas under specific threat or high-security needs</span>: &#8220;I&#8217;m Under Attack&#8221; mode to aggressively challenge traffic.</li> </ul> <p>It&#8217;s important to note that the Page Rules should be ordered by priority, as the first matching rule will be the one that is applied. The configuration should be regularly reviewed and updated based on the evolving needs and threat landscape of the website.</p> <h2><span class="ez-toc-section" id="Recommended_Cloudflare_Security_Settings"></span>Recommended Cloudflare Security Settings<span class="ez-toc-section-end"></span></h2> <p>Security threats are becoming increasingly sophisticated, making it paramount for websites to fortify their defenses. The vast expanse of security features provided by platforms like Cloudflare offers a comprehensive shield, guarding against a multitude of threats ranging from opportunistic bots to coordinated DDoS attacks. Let&#8217;s review Cloudflare&#8217;s main security settings. Followed by the security events page, WAF (Web Application Platform), Bots and DDoS.</p> <h3><span class="ez-toc-section" id="Cloudflare_%3E_Security_%3E_Settings"></span>Cloudflare &gt; Security &gt; Settings<span class="ez-toc-section-end"></span></h3> <p><img loading="lazy" decoding="async" class="alignnone wp-image-18027 size-full" title="Cloudflare Security Settings" src="https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-security-settings.png" alt="Cloudflare Security Settings" width="868" height="637" srcset="https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-security-settings.png 868w, https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-security-settings-300x220.png 300w, https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-security-settings-560x411.png 560w" sizes="auto" /></p> <p>In the Security Settings of Cloudflare, you have the ability to adjust your website&#8217;s defense mechanisms according to the threat landscape and your specific security needs. The settings in the screenshot are critical components of Cloudflare&#8217;s security posture.</p> <h4><span class="ez-toc-section" id="Security_Level"></span><strong>Security Level</strong><span class="ez-toc-section-end"></span></h4> <p>This setting allows you to adjust the sensitivity of the security measures applied to your site. A medium level typically strikes a balance between protection and accessibility, challenging only the most suspicious traffic.</p> <ul> <li><strong>Function:</strong> Determines the threshold for challenging visitors.</li> <li><strong>Benifit:</strong> Balances user experience with security by filtering traffic based on threat level.</li> <li><strong>Optimal Setting:</strong> Set to medium for general use, higher during an attack, or lower for minimal interference with users.</li> </ul> <h4><span class="ez-toc-section" id="Challenge_Passage"></span><strong>Challenge Passage</strong><span class="ez-toc-section-end"></span></h4> <p>This specifies how long a visitor has access to your website after passing a security challenge. It&#8217;s a way to ensure that once a user is verified as legitimate, they can browse without being challenged again for a set period.</p> <ul> <li><strong>Function:</strong> Sets duration of access post-challenge verification.</li> <li><strong>Benifit:</strong> Enhances user experience for verified visitors, reducing friction.</li> <li><strong>Optimal Setting:</strong> Set to 1 hour for most websites; adjust based on user behavior and threat intensity.</li> </ul> <h4><span class="ez-toc-section" id="Browser_Integrity_Check"></span><strong>Browser Integrity Check</strong><span class="ez-toc-section-end"></span></h4> <p>This feature scrutinizes HTTP headers from incoming requests to detect and block malicious threats, ensuring that only clean traffic reaches your site.</p> <ul> <li><strong>Function:</strong> Filters out malicious traffic based on header anomalies.</li> <li><strong>Benifit:</strong> Protects against common web threats and reduces malicious traffic.</li> <li><strong>Optimal Setting:</strong> Keep enabled to consistently safeguard against header-based vulnerabilities.</li> </ul> <p>These settings form the first line of defense, offering a robust framework to protect your web assets while maintaining a seamless user experience. They are the groundwork upon which more specific and advanced security features are built, including WAF (Web Application Firewall), bot management, and DDoS protection, each of which we will explore next.</p> <h3><span class="ez-toc-section" id="Cloudflare_%3E_Security_%3E_Events"></span>Cloudflare &gt; Security &gt; Events<span class="ez-toc-section-end"></span></h3> <p><img loading="lazy" decoding="async" class="alignnone wp-image-18032 size-full" title="Cloudflare &gt; Security &gt; Events" src="https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-firewall-events.png" alt="Cloudflare &gt; Security &gt; Events" width="868" height="654" srcset="https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-firewall-events.png 868w, https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-firewall-events-300x226.png 300w, https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-firewall-events-560x422.png 560w" sizes="auto" /></p> <p>The Firewall Events dashboard in Cloudflare provides a comprehensive overview of security-related events affecting your website. It presents data and visualizations that give insights into the patterns and sources of threats. From the screenshot, we see different metrics like the number of events triggered by custom rules, security level settings, managed rules, rate limiting, and browser integrity checks.</p> <p>The top section displays the quantity of events per service, offering a clear picture of which security features are most frequently engaged. All of which can be filtered by <em>Action, Host, Country, ASN, IP, etc. </em>This can help you understand the relative volume of threats and the effectiveness of your current security posture.</p> <p><img loading="lazy" decoding="async" class="alignnone wp-image-18034 size-full" title="Cloudflare Top events by source" src="https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-waf-top-events-by-source.png" alt="Cloudflare Top events by source" width="868" height="712" srcset="https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-waf-top-events-by-source.png 868w, https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-waf-top-events-by-source-300x246.png 300w, https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-waf-top-events-by-source-560x459.png 560w" sizes="auto" /></p> <p>Below that, there&#8217;s a breakdown of &#8216;Top events by source,&#8217; (see above screenshot) detailing the origin of security events, categorized by IP addresses, User Agents, paths, Countries, etc. This is crucial for identifying potential sources of attacks or malicious behavior. To recap:</p> <ul> <li><strong>Function:</strong> Provides real-time monitoring of security events, identifies patterns and sources of potential threats and enables targeted security responses.</li> <li><strong>Benifit:</strong> Assists in recognizing and responding to attacks swiftly, helps refine WAF rules and other security settings based on actual data, and supports proactive measures against specific threats.</li> <li><strong>Optimal Setting:</strong> N/A (This is a monitoring tool, so there are no &#8220;settings&#8221; to optimize; instead, it informs the optimization of other security features.)</li> </ul> <p>By monitoring the data presented in the Security Events section, administrators can make informed decisions to implement better WAF security settings. For example, if there is a high number of events from a particular country that does not align with your expected traffic patterns, you could create a Geo-Blocking rule in the WAF to mitigate this. Similarly, if certain user agents are consistently linked to malicious activities, they can be set up in the WAF to challenge or block them proactively. The goal is to use the insights gained from this dashboard to enhance your security posture continuously.</p> <h3><span class="ez-toc-section" id="Cloudflare_%3E_Security_%3E_WAF_Web_Application_Firewall"></span>Cloudflare &gt; Security &gt; WAF (Web Application Firewall)<span class="ez-toc-section-end"></span></h3> <p><img loading="lazy" decoding="async" class="alignnone wp-image-18061 size-full" title="Cloudflare &gt; Security &gt; WAF (Web Application Firewall)" src="https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-security-WAF.png" alt="Cloudflare &gt; Security &gt; WAF (Web Application Firewall)" width="868" height="591" srcset="https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-security-WAF.png 868w, https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-security-WAF-300x204.png 300w, https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-security-WAF-560x381.png 560w" sizes="auto" /><br /> <em>Improve your custom rules over time.</em></p> <p>Cloudflare’s Web Application Firewall (WAF) is a robust security layer that safeguards websites and APIs from a myriad of threats, including cross-site scripting (XSS), SQL injection, and DDoS attacks. The WAF operates at the network edge, making it possible to detect and block potential attacks before they reach a site’s server. It&#8217;s an essential tool for any website looking to protect its data and maintain its integrity in the face of ever-evolving online threats.</p> <p>The above screenshot shows some highlights the WAF’s user interface, with a particular focus on the &#8220;Custom rules&#8221; tab. This section allows for the creation of tailored rules that address specific security concerns. For example, the listed &#8220;Spam countries v2&#8221; and &#8220;Spam countries&#8221; rules suggest configurations designed to challenge traffic from regions known for generating spam or participating in malicious activities. Not all custom rules are visible in the screenshot, I will share the rest later. I recently changed domain names about 2 weeks ago so still setting up Cloudflare config for LinuxBlog.io.</p> <p>Notice in the example above, I&#8217;m adding instead of editing when making notable rule changes. Simply disable the previous version of the rule. Make use of your &#8220;available rules&#8221; so that you can quickly revert to previous rules if you need to. Don&#8217;t delete your previous rules until you run out of avaiable rules.</p> <p><img loading="lazy" decoding="async" class="alignnone wp-image-18095 size-full" title="Cloudflare WAF Custom Rules Managed Challenge by country." src="https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-spam-country-list-1.png" alt="Cloudflare WAF Custom Rules Managed Challenge by country." width="868" height="435" srcset="https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-spam-country-list-1.png 868w, https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-spam-country-list-1-300x150.png 300w, https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-spam-country-list-1-560x281.png 560w" sizes="auto" /><br /> <em>Custom rule to present a managed challenge. Ref: <a href="https://developers.cloudflare.com/waf/tools/security-level/" target="_blank" rel="noopener">Cloudflare Security Level</a>.</em></p> <p><img loading="lazy" decoding="async" class="alignnone wp-image-18098 size-full" title="Cloudflare WAF Custom Rules events by country." src="https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-WAF-events-spam-country-list-1.png" alt="Cloudflare WAF Custom Rules events by country." width="868" height="540" srcset="https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-WAF-events-spam-country-list-1.png 868w, https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-WAF-events-spam-country-list-1-300x187.png 300w, https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-WAF-events-spam-country-list-1-560x348.png 560w" sizes="auto" /><br /> <em>Managed challenges over a 30-minute period.</em></p> <p>I blurred 5 of the countires, I just don&#8217;t want to encourage mass blocking of countries. Remember: <span style="text-decoration: underline;">Threats will differ from site-to-site.</span> The best approach is to select countries based on your event logs. There are no <em>bad</em> countries that should always be singled out.</p> <h4><span class="ez-toc-section" id="Custom_rules"></span>Custom rules<span class="ez-toc-section-end"></span></h4> <ul> <li><strong>Function:</strong> Custom rules allow for precise control over how traffic is handled, letting administrators set criteria to challenge or block requests based on factors like country of origin, IP reputation and requests.</li> <li><strong>Benefit:</strong> These rules offer a granular level of security, enabling targeted protection against spambots, automated threats, and specific vulnerabilities unique to your site. They are instrumental in preventing unwanted traffic and ensuring that resources are served to legitimate users only.</li> <li><strong>Optimal Setting:</strong> Custom rules should be tailored to the specific security needs of a site. The optimal setting varies based on the website/application, threat landscape and traffic patterns. It&#8217;s best to analyze traffic and threat reports to identify trends that warrant custom rules.</li> </ul> <p>Here for example is a rule I use to block IPs that make requests to WordPress files that should not be accessed publicly. Remember, even thought the file does not exist, for example, xmlrpc.php is deleted on our server, but we still want to block IPs that request it. In any case, here&#8217;s the custom rule:</p> <pre>(http.request.uri.path contains "/wp-login.php") or  (http.request.uri.path contains "/wp-register.php") or  (http.request.uri.path eq "/wp-admin/") or  (http.request.uri.path contains "/wp-admin/install.php") or  (http.request.uri.path contains "/wp-admin/upgrade.php") or  (http.request.uri.path contains "/wp-admin/theme-editor.php") or  (http.request.uri.path contains "/wp-admin/plugin-editor.php") or  (http.request.uri.path contains "/wp-config.php") or  (http.request.uri.path contains "/xmlrpc.php") or  (http.request.uri.path contains "/backup/") or  (http.request.uri.path contains "/wp-backup/")</pre> <p><img loading="lazy" decoding="async" class="alignnone wp-image-18066 size-full" title="Cloudflare Custom Rules WordPress URLs" src="https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-WAF-events-WP-urls-list.png" alt="Cloudflare Custom Rules WordPress URLs" width="868" height="470" srcset="https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-WAF-events-WP-urls-list.png 868w, https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-WAF-events-WP-urls-list-300x162.png 300w, https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-WAF-events-WP-urls-list-560x303.png 560w" sizes="auto" /></p> <p>Here&#8217;s a breakdown of the rule:</p> <ul> <li>The rule uses the <code>contains</code> operator for several paths, such as <code>/wp-login.php</code>, <code>/wp-register.php</code>, <code>/wp-admin/install.php</code>, and others. This means it will block or manage access to requests that include these specific strings.</li> <li>The rule uses <code>eq</code> for <code>/wp-admin/</code>, which means it will only block requests that exactly match the <code>/wp-admin/</code> path. This would not include <code>/wp-admin/admin-ajax.php</code>, or any other subdirectories like <code>js/</code> or <code>css/</code>.</li> <li>The action isn&#8217;t included in this rule. I suggest you skip, then challenge, then block after monitoring rules like this over several days or weeks.</li> </ul> <h4><span class="ez-toc-section" id="Rate_Limiting_Rules"></span>Rate Limiting Rules<span class="ez-toc-section-end"></span></h4> <p><img loading="lazy" decoding="async" class="alignnone wp-image-18063 size-full" title="Cloudflare Rate-Limiting Rules" src="https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-WAF-rate-limiting-rules.png" alt="Cloudflare Rate-Limiting Rules" width="868" height="499" srcset="https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-WAF-rate-limiting-rules.png 868w, https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-WAF-rate-limiting-rules-300x172.png 300w, https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-WAF-rate-limiting-rules-560x322.png 560w" sizes="auto" /></p> <p>Rate Limiting Rules within Cloudflare&#8217;s Web Application Firewall (WAF) offer a robust mechanism for controlling the flow of traffic to your website or API. By setting thresholds for how many requests a user can make within a certain time period, rate limiting is essential for preventing abuse and ensuring that resources are not overwhelmed by excessive traffic, which could be indicative of malicious intent.</p> <p>The above screenshot indicates two rules (Pro account limit): &#8220;WP Login&#8221; and &#8220;Flood.&#8221; The &#8220;WP Login&#8221; rule blocks excessive login attempts, protecting against brute force attacks on the WordPress login page. The &#8220;Flood&#8221; rule is currently set to issue a Managed Challenge instead of a block as I&#8217;m still in the testing phase. This is a approach is to ensure that legitimate users are not inadvertently blocked due to overzealous rate limiting. When implementing new rate-limiting rules, it&#8217;s crucial to adopt a cautious and measured approach.</p> <ul> <li><strong>Function: </strong>Regulates the number of requests to prevent abuse and mitigates brute force and DDoS attacks.</li> <li><strong>Benifit: </strong>Preserves website and API availability and enhances security without affecting normal user access.</li> <li><strong>Optimal Setting: </strong>Initially set rules to Skip or Log to monitor impact. Use Managed Challenge as an intermediate step for testing. Proceed to Block only after confirming the rule&#8217;s accuracy and necessity.</li> </ul> <h5><span class="ez-toc-section" id="Recommended_approach_when_adding_WAF_rules"></span>Recommended approach when adding WAF rules<span class="ez-toc-section-end"></span></h5> <p>It&#8217;s important to monitor new rules carefully, starting with less restrictive actions like &#8216;skip&#8217; or &#8216;log&#8217;. This allows you to gather data on the rule&#8217;s impact without disrupting user access. Managed Challenges can then be implemented to challenge suspicious traffic, which still allows access once the challenge is passed. This step is vital to fine-tune the rule&#8217;s sensitivity and to avoid false positives that could block legitimate users.</p> <p>Only after thorough testing and assurance that the rule targets only the intended malicious or unwanted traffic should you consider escalating to a Block action. This progressive strategy ensures that security measures do not compromise user experience and that access is maintained for genuine traffic.</p> <p>In the case of the &#8220;Flood&#8221; rule, this testing phase is particularly important. A week ago it was set to &#8216;skip&#8217;. It allows for the adjustment of thresholds and the evaluation of whether a challenge is an effective deterrent for the unwanted traffic observed. This careful approach to rule implementation is key to maintaining a secure yet accessible online environment.</p> <h4><span class="ez-toc-section" id="Managed_Rules"></span>Managed Rules<span class="ez-toc-section-end"></span></h4> <p><img loading="lazy" decoding="async" class="alignnone wp-image-18064 size-full" title="Cloudflare WAF Managed Rules" src="https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-WAF-managed-rules.png" alt="Cloudflare WAF Managed Rules" width="868" height="425" srcset="https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-WAF-managed-rules.png 868w, https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-WAF-managed-rules-300x147.png 300w, https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-WAF-managed-rules-560x274.png 560w" sizes="auto" /></p> <p>Managed rules within Cloudflare&#8217;s WAF serve as a comprehensive line of defense, automatically updated by the Cloudflare team to protect against emerging threats. The above screenshot highlights three key managed rules provided by default (Pro accounts and above):</p> <ol> <li><strong>Cloudflare OWASP Core Ruleset</strong>: A set of rules designed to protect against widespread web application security risks as identified by the Open Web Application Security Project (OWASP).</li> <li><strong>Cloudflare Managed Ruleset</strong>: Cloudflare&#8217;s own set of rules that protect against various exploits and vulnerabilities known to the Cloudflare community.</li> <li><strong>Cloudflare Leaked Credentials Check</strong>: A safeguard that checks for credentials that have been exposed in known data breaches, helping prevent unauthorized access.</li> </ol> <p>These managed rules analyze characteristics of each incoming request and determine the appropriate action to ensure the application&#8217;s security. However, applying these rules globally across your entire site can sometimes be overly restrictive, especially for areas of your site that are not sensitive.</p> <h5><span class="ez-toc-section" id="Best_Practices_for_Managed_Rules_Implementation"></span>Best Practices for Managed Rules Implementation<span class="ez-toc-section-end"></span></h5> <p><img loading="lazy" decoding="async" class="alignnone wp-image-18067 size-full" title="Cloudflare Best Practices for Managed Rules" src="https://static.linuxblog.io/wp-content/uploads/2023/12/Cloudflare-WAF-Managed-Ruleset-configuration.png" alt="Cloudflare Best Practices for Managed Rules" width="868" height="651" srcset="https://static.linuxblog.io/wp-content/uploads/2023/12/Cloudflare-WAF-Managed-Ruleset-configuration.png 868w, https://static.linuxblog.io/wp-content/uploads/2023/12/Cloudflare-WAF-Managed-Ruleset-configuration-300x225.png 300w, https://static.linuxblog.io/wp-content/uploads/2023/12/Cloudflare-WAF-Managed-Ruleset-configuration-560x420.png 560w" sizes="auto" /></p> <p>To strike a balance between security and functionality, it&#8217;s often better to restrict the scope of managed rules to only cover areas of your site that are particularly sensitive, such as admin panels (<code>/wp-admin/</code>), file upload endpoints (<code>/uploads/</code>), and forms that submit sensitive information (web form, login areas, checkout pages etc).</p> <p>This targeted approach ensures that the rules are applied where they&#8217;re most needed, reducing the likelihood of false positives and unnecessary challenges to legitimate users. I&#8217;m not sure of the overhead involved, so I cannot speak to that, but its probably best not to be have these rules enabled globally. For example, on your static directories and files. Feedback welcomed.</p> <p>When first implementing managed rules, it&#8217;s recommended to set them to &#8220;Log&#8221; mode instead of &#8220;Challenge&#8221; or &#8220;Block&#8221;.  This allows you to observe the rules&#8217; impact and gather data on potential false positives or legitimate requests that could be affected. The duration for this observation period can vary:</p> <ul> <li>For high-traffic websites, up to a day of logging may suffice to collect a representative sample of data.</li> <li>For low-traffic websites, a longer period may be necessary to ensure enough data is collected to make informed decisions about the rules&#8217; configurations.</li> </ul> <p>By monitoring the logs via the &#8220;Events&#8221; page, you can fine-tune the rules to minimize disruptions to user experience while maintaining robust security measures. Once you&#8217;re confident in the rules&#8217; accuracy and efficacy, you can then transition from logging to enforcing actions like &#8220;Challenge&#8221; or &#8220;Block.&#8221;</p> <h4><span class="ez-toc-section" id="WAF_Tools"></span>WAF Tools<span class="ez-toc-section-end"></span></h4> <p>I&#8217;m still setting up the section and prefer to take screenshots a week or two after. So this section is coming soon. For now, &#8220;Tools&#8221; section of Cloudflare&#8217;s WAF includes some additional features that enhance the firewall&#8217;s functionality, allowing for greater control and customization of security settings.</p> <ul> <li><strong>IP Access Rules</strong>: Use these rules to block known malicious IPs or allow traffic from known good IPs. It’s important to regularly update these lists to adapt to changing traffic and threat patterns.</li> <li><strong>User Agent Blocking</strong>: Before creating blocking rules, analyze your site&#8217;s traffic to identify any user agents associated with suspicious behavior. Be cautious to avoid blocking legitimate crawlers like search engine bots.</li> <li><strong>Zone Lockdown</strong>: Implement lockdown rules for URLs that should only be accessed by your team or specific systems. This ensures sensitive areas are not exposed to potential attackers.</li> </ul> <h3><span class="ez-toc-section" id="Cloudflare_%3E_Security_%3E_Bots"></span>Cloudflare &gt; Security &gt; Bots<span class="ez-toc-section-end"></span></h3> <p><img loading="lazy" decoding="async" class="alignnone wp-image-18086 size-full" title="Cloudflare &gt; Security &gt; Bots" src="https://static.linuxblog.io/wp-content/uploads/2023/12/Cloudflare-WAF-bots.png" alt="Cloudflare &gt; Security &gt; Bots" width="868" height="477" srcset="https://static.linuxblog.io/wp-content/uploads/2023/12/Cloudflare-WAF-bots.png 868w, https://static.linuxblog.io/wp-content/uploads/2023/12/Cloudflare-WAF-bots-300x165.png 300w, https://static.linuxblog.io/wp-content/uploads/2023/12/Cloudflare-WAF-bots-560x308.png 560w" sizes="auto" /></p> <p>Cloudflare&#8217;s Bots feature provides insights and controls to manage automated traffic on your site, distinguishing between likely human visitors, automated bots, likely automated traffic, and verified bots, as seen in the screenshot.</p> <p>The &#8220;Bot Report&#8221; breaks down the total requests into categories, showing that out of 85.59k requests, 6.87k were from automated bots, 68.11k were likely human, 3.37k were likely automated (but not definitively identified as bots), and 7.25k were from verified bots, which could include search engine crawlers and other beneficial bots.</p> <ul> <li><strong>Function</strong>: Identifies the nature of traffic, segregating human from bot activity.</li> <li><strong>Benefits</strong>: Enables targeted measures against malicious bots without impacting human or beneficial bot traffic.</li> <li><strong>Optimal Setting</strong>: Maintain a balanced configuration that blocks or challenges malicious bots while allowing verified and good bots necessary for SEO, performance <a href="https://linuxblog.io/observability-plus-20-observability-software-vendors/" target="_blank" rel="noopener">obervability</a> and website analytics.</li> </ul> <p>The &#8220;Configure Super Bot Fight Mode&#8221; leads to more advanced bot management settings. Super Bot Fight Mode provides additional options for dealing with bots, but it should be used with caution. Overly aggressive settings might block legitimate crawlers, which can negatively impact your site&#8217;s SEO and website visibility.</p> <h3><span class="ez-toc-section" id="Cloudflare_%3E_DNS_%3E_Settings_%3E_DNSSEC"></span>Cloudflare &gt; DNS &gt; Settings &gt; DNSSEC<span class="ez-toc-section-end"></span></h3> <p><img loading="lazy" decoding="async" class="alignnone wp-image-18076 size-full" title="Cloudflare &gt; DNS &gt; Settings &gt; DNSSEC" src="https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-DNS-DNSSEC.png" alt="Cloudflare &gt; DNS &gt; Settings &gt; DNSSEC" width="868" height="261" srcset="https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-DNS-DNSSEC.png 868w, https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-DNS-DNSSEC-300x90.png 300w, https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-DNS-DNSSEC-560x168.png 560w" sizes="auto" /></p> <p>DNSSEC (Domain Name System Security Extensions) adds an extra layer of security to your domain&#8217;s DNS by attaching a digital signature to its DNS records. This signature ensures that visitors to your website are actually arriving at your real website, not a malicious one. Essentially, it helps to protect your domain against forged DNS answers, commonly known as DNS spoofing or cache poisoning, where an attacker redirects traffic from your domain to a fraudulent website.</p> <ul> <li><strong>Function: </strong>Secures DNS lookups with cryptographic signatures.</li> <li><strong>Benefits: </strong>Prevents DNS spoofing and ensures data integrity.</li> <li><strong>Optimal Setting: </strong>Enabled, with a properly configured DS record.</li> </ul> <h3><span class="ez-toc-section" id="Cloudflare_%3E_SSLTLS"></span>Cloudflare &gt; SSL/TLS<span class="ez-toc-section-end"></span></h3> <p><img loading="lazy" decoding="async" class="alignnone wp-image-18080 size-full" title="Cloudflare &gt; SSL/TLS" src="https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-ssl-tls-encryption-mode-full-strict.png" alt="Cloudflare &gt; SSL/TLS" width="860" height="232" srcset="https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-ssl-tls-encryption-mode-full-strict.png 860w, https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-ssl-tls-encryption-mode-full-strict-300x81.png 300w, https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-ssl-tls-encryption-mode-full-strict-560x151.png 560w" sizes="auto" /></p> <p>The SSL/TLS section in Cloudflare is where you configure the encryption for data transferred between the client (browser), Cloudflare, and the origin server. This, as you probable already know, enables the SSL certificate lock icon in your web browser.</p> <p>&#8220;Full (strict)&#8221; mode ensures that the connection between both the browser and Cloudflare, and Cloudflare and the origin server, is encrypted. This mode requires a trusted certificate on the server, which means it must be signed by a recognized Certificate Authority (CA) or by Cloudflare Origin CA. It&#8217;s the most secure option because it verifies that the certificate on the origin server is valid before establishing a connection, preventing man-in-the-middle attacks. Also, read Cloudflare&#8217;s <a href="https://developers.cloudflare.com/ssl/origin-configuration/ssl-modes" target="_blank" rel="noopener">Encryption modes</a>.</p> <ul> <li><strong>Function: </strong>Ensures end-to-end encryption with certificate validation.</li> <li><strong>Benefits: </strong>Provides strong security, preventing eavesdropping and tampering.</li> <li><strong>Optimal Setting: &#8220;</strong>Full&#8221; or better yet &#8220;Full (strict)&#8221; for maximum security with a valid SSL certificate.</li> </ul> <h4><span class="ez-toc-section" id="Edge_Certificates"></span>Edge Certificates<span class="ez-toc-section-end"></span></h4> <p><img loading="lazy" decoding="async" class="alignnone wp-image-18084 size-full" title="Cloudflare Edge Certificates" src="https://static.linuxblog.io/wp-content/uploads/2023/12/Cloudflare-SSL-TLS-always-use-https-HSTS.png" alt="Cloudflare Edge Certificates" width="868" height="459" srcset="https://static.linuxblog.io/wp-content/uploads/2023/12/Cloudflare-SSL-TLS-always-use-https-HSTS.png 868w, https://static.linuxblog.io/wp-content/uploads/2023/12/Cloudflare-SSL-TLS-always-use-https-HSTS-300x159.png 300w, https://static.linuxblog.io/wp-content/uploads/2023/12/Cloudflare-SSL-TLS-always-use-https-HSTS-560x296.png 560w" sizes="auto" /></p> <p>The &#8220;Edge Certificates&#8221; section is pivotal for ensuring that your website is securely served over HTTPS. The screenshot above highlights two essential security features: &#8220;Always Use HTTPS&#8221; and &#8220;HTTP Strict Transport Security (HSTS).&#8221;</p> <h5><span class="ez-toc-section" id="Always_Use_HTTPS"></span>Always Use HTTPS<span class="ez-toc-section-end"></span></h5> <p>This feature enforces the use of HTTPS by redirecting all HTTP requests to HTTPS, ensuring that data between your users and Cloudflare is encrypted.</p> <p>This setting is a fundamental step towards securing user traffic on your site. It is particularly useful for preventing users from accidentally accessing a non-secure version of your site. This setting is a best practice for all websites and should be enabled as part of a basic security posture.</p> <ul> <li><strong>Function</strong>: Redirects HTTP requests to HTTPS automatically.</li> <li><strong>Benefits</strong>: Guarantees secure, encrypted connections for all users.</li> <li><strong>Optimal Setting</strong>: Enabled, to ensure all traffic is secure by default.</li> </ul> <h5><span class="ez-toc-section" id="HTTP_Strict_Transport_Security_HSTS"></span>HTTP Strict Transport Security (HSTS)<span class="ez-toc-section-end"></span></h5> <p>HSTS is a security policy mechanism whereby the web server declares that browsers should only interact with it using secure HTTPS connections.</p> <p>HSTS further reinforces this security by ensuring that once a user has accessed your site, their browser remembers to always use HTTPS, not just for the initial request but for all subsequent requests for the duration specified by the <code>max-age</code> parameter. Including subdomains ensures that the HSTS policy is applied uniformly across your entire domain, and enabling preload tells browsers to enforce HTTPS even on the first visit before any interaction with your site.</p> <p>When setting the <code>max-age</code> parameter for HSTS, it&#8217;s important to consider how often your site&#8217;s users visit and how likely you are to maintain HTTPS availability. A longer <code>max-age</code> increases security, but requires a commitment to keeping your HTTPS infrastructure in good order. Preloading should be used with caution, as it commits your site to HTTPS permanently, which can be an issue if you ever need to revert to HTTP. <span style="text-decoration: underline;"><em><strong>You&#8217;ve been warned!!</strong></em></span></p> <ul> <li><strong>Function</strong>: Instructs browsers to only use HTTPS for all connections.</li> <li><strong>Benefits</strong>: Prevents SSL stripping and man-in-the-middle attacks.</li> <li><strong>Optimal Setting</strong>: Enabled with a long <code>max-age</code> (at least 6 months), include subdomains, and consider enabling preload for added security.</li> </ul> <p><img loading="lazy" decoding="async" class="alignnone wp-image-18083 size-full" title="Cloudflare SSL/TLS settings" src="https://static.linuxblog.io/wp-content/uploads/2023/12/Cloudflare-SSL-TLS-Minimum-TLS-Version.png" alt="Cloudflare SSL/TLS settings" width="868" height="665" srcset="https://static.linuxblog.io/wp-content/uploads/2023/12/Cloudflare-SSL-TLS-Minimum-TLS-Version.png 868w, https://static.linuxblog.io/wp-content/uploads/2023/12/Cloudflare-SSL-TLS-Minimum-TLS-Version-300x230.png 300w, https://static.linuxblog.io/wp-content/uploads/2023/12/Cloudflare-SSL-TLS-Minimum-TLS-Version-560x429.png 560w" sizes="auto" /></p> <p>The features shown in the above screenshot are also critical for ensuring secure and efficient communication. Full disclosure, you can use &#8220;SSL/TLS Recommender&#8221; which will email you a recommended TLS minimum version. Or, take a look at the &#8220;Traffic Served Over TLS&#8221; bar and decide based on current active versions used to connect to your website. Do not use TLS below version 1.2.</p> <h5><span class="ez-toc-section" id="Minimum_TLS_Version"></span>Minimum TLS Version<span class="ez-toc-section-end"></span></h5> <p>This setting dictates the oldest version of the TLS protocol that visitor connections must use to access your site.</p> <ul> <li><strong>Function</strong>: Sets the lowest acceptable TLS version for connections.</li> <li><strong>Benefits</strong>: Enhances security by using newer, more secure protocols.</li> <li><strong>Optimal Setting</strong>: TLS 1.2 or higher for a good balance between compatibility and security.</li> </ul> <h5><span class="ez-toc-section" id="Opportunistic_Encryption"></span>Opportunistic Encryption<span class="ez-toc-section-end"></span></h5> <p>This option allows HTTP/2 connections over TLS without altering the URI scheme to HTTPS in the browser&#8217;s address bar.</p> <ul> <li><strong>Function</strong>: Provides HTTP/2 benefits over encrypted connections.</li> <li><strong>Benefits</strong>: Improves loading times while maintaining encryption.</li> <li><strong>Optimal Setting</strong>: Enabled, to offer performance improvements of HTTP/2.</li> </ul> <h5><span class="ez-toc-section" id="TLS_13-2"></span>TLS 1.3<span class="ez-toc-section-end"></span></h5> <p>TLS 1.3 is the latest version of the TLS protocol, offering improved security and speed.</p> <ul> <li><strong>Function</strong>: Activates the latest TLS protocol for connections.</li> <li><strong>Benefits</strong>: Increases security and connection speed.</li> <li><strong>Optimal Setting</strong>: Enabled, to ensure the highest security standard.</li> </ul> <h5><span class="ez-toc-section" id="Automatic_HTTPS_Rewrites"></span>Automatic HTTPS Rewrites<span class="ez-toc-section-end"></span></h5> <p>This feature helps to prevent mixed content issues by rewriting HTTP URLs to HTTPS automatically, where possible.</p> <ul> <li style="list-style-type: none;"> <ul> <li><strong>Function</strong>: Converts insecure links to secure ones on your site.</li> <li><strong>Benefits</strong>: Resolves mixed content issues, enhancing site security.</li> <li><strong>Optimal Setting</strong>: Enabled, to ensure secure content delivery.</li> </ul> </li> </ul> <p>These settings are crucial for safeguarding data in transit and ensuring that your website&#8217;s encryption protocols meet current security standards. By correctly configuring your edge certificates and related settings, you provide a secure environment for your users and improve their trust in your site.</p> <h3 class="c_cp c_hp c_eb c_dp c_jf"><span class="ez-toc-section" id="Cloudflare_%3E_Security_%3E_DDoS"></span>Cloudflare &gt; Security &gt; DDoS<span class="ez-toc-section-end"></span></h3> <p><img loading="lazy" decoding="async" class="alignnone size-full wp-image-18100" src="https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-HTTP-DDoS-attach-protection.png" alt="" width="868" height="291" srcset="https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-HTTP-DDoS-attach-protection.png 868w, https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-HTTP-DDoS-attach-protection-300x101.png 300w, https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-HTTP-DDoS-attach-protection-560x188.png 560w" sizes="auto" /></p> <p>Not that automatic DDoS protection is always enabled by default and is constantly analyzing traffic, generating real-time signatures to mitigate attacks across the network and application layers. No action necessary. Feedback/tips welcomed.</p> <h3><span class="ez-toc-section" id="Cloudflare_%3E_Security_%3E_Page_Shield"></span>Cloudflare &gt; Security &gt; Page Shield<span class="ez-toc-section-end"></span></h3> <p><img loading="lazy" decoding="async" class="alignnone wp-image-18102 size-full" title="Cloudflare &gt; Security &gt; Page Shield" src="https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-security-page-shield.png" alt="Cloudflare &gt; Security &gt; Page Shield" width="868" height="474" srcset="https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-security-page-shield.png 868w, https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-security-page-shield-300x164.png 300w, https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-security-page-shield-560x306.png 560w" sizes="auto" /></p> <p>Page Shield is a feature within Cloudflare’s security suite specifically designed for applications with significant JavaScript elements. It monitors JavaScript dependencies and alerts administrators to any changes, helping to prevent malicious code injections or unauthorized changes that could compromise a website&#8217;s integrity or user data.</p> <ul> <li><strong>Function: </strong>Monitors JavaScript dependencies for changes or anomalies.</li> <li><strong>Benefits: </strong>Protects against malicious script injections and data breaches and alerts administrators to unauthorized modifications.</li> <li><strong>Optimal Setting:</strong> Enabled for websites with heavy JavaScript usage for proactive security monitoring.</li> </ul> <p>I&#8217;m not currently using Page Shield for my blog. However, the above screenshot is from one of my fully managed clients. Page Shield is particularly useful for websites that rely on JavaScript, as it ensures the integrity of the scripts running on the site. This is crucial for maintaining both website functionality and user security, especially when JavaScript is used to handle sensitive information or complex interactions.</p> <p><img loading="lazy" decoding="async" class="alignnone wp-image-18103 size-full" title="Cloudflare &gt; Security &gt; Page Shield (list of active scripts)" src="https://static.linuxblog.io/wp-content/uploads/2023/12/Cloudflare-security-page-shield-active-scripts.png" alt="Cloudflare &gt; Security &gt; Page Shield (list of active scripts)" width="868" height="464" srcset="https://static.linuxblog.io/wp-content/uploads/2023/12/Cloudflare-security-page-shield-active-scripts.png 868w, https://static.linuxblog.io/wp-content/uploads/2023/12/Cloudflare-security-page-shield-active-scripts-300x160.png 300w, https://static.linuxblog.io/wp-content/uploads/2023/12/Cloudflare-security-page-shield-active-scripts-560x299.png 560w" sizes="auto" /></p> <p>For websites where JavaScript is a cornerstone of the user experience, having Page Shield enabled with vigilant monitoring is essential. The optimal setting for such sites would be to have Page Shield continuously monitor all JavaScript resources, with alerts finely tuned to the sensitivity of the content and the typical behavior patterns of the site&#8217;s users. This ensures a secure, uninterrupted browsing experience for users while preserving the site’s functionality and performance.</p> <h2><span class="ez-toc-section" id="Conclusion"></span>Conclusion<span class="ez-toc-section-end"></span></h2> <p><img loading="lazy" decoding="async" class="alignnone wp-image-18105 size-full" title="Cloudflare has even more features available in their Business and Enterprise plans. " src="https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-security-analytics.png" alt="Cloudflare has even more features available in their Business and Enterprise plans. " width="868" height="480" srcset="https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-security-analytics.png 868w, https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-security-analytics-300x166.png 300w, https://static.linuxblog.io/wp-content/uploads/2023/12/cloudflare-security-analytics-560x310.png 560w" sizes="auto" /><br /> <em>Cloudflare Security Analytics page.</em></p> <p>Cloudflare’s full suite of performance and security tools is an invaluable resource for web developers and webmasters looking to speed up their website, user experience and security. This guide walked you through these settings and what each does to help speed up and secure your website from the ever-changing online threats.</p> <p>Remember, the recommended settings are a good starting point, but every website is unique. Regular monitoring and adjustments, with tools like Cloudflare’s Speed Observatory, Security Events, Google PageSpeed insights and <a href="https://linuxblog.io/20-top-server-monitoring-application-performance-monitoring-apm-solutions/" target="_blank" rel="noopener">observability</a> will help you keep these settings in line with your needs.</p> <p>By leveraging these tools, webmasters can not only meet but exceed user expectations and deliver seamless and secure experiences.</p><div  class="hayden-d251d8733366ebc37b2b1eb337be3eda hayden-end-of-article" id="hayden-d251d8733366ebc37b2b1eb337be3eda"></div> <h3 class="tag-line" style="margin-top: 30px; padding-top: 20px; padding-bottom: 8px; border-top: 1px solid #ddd;">Tags: <a href="https://linuxblog.io/tag/cloudflare/" rel="tag">cloudflare</a>, <a href="https://linuxblog.io/tag/cybersecurity/" rel="tag">cybersecurity</a>, <a href="https://linuxblog.io/tag/hosting/" rel="tag">hosting</a>, <a href="https://linuxblog.io/tag/security/" rel="tag">security</a></h3> <div class="custom-post-footer" style="margin-top: 0px; padding-top: 0px; padding-bottom: 0px;"> <p class="share-message"><i>Thanks for reading! Please share this article on <a href="https://www.linkedin.com/shareArticle?mini=true&#038;url=https%3A%2F%2Flinuxblog.io%2Frecommended-cloudflare-performance-security-settings-guide%2F&#038;title=Recommended+Cloudflare+Performance+and+Security+Settings+%28Guide%29" class="share-link" target="_blank" rel="noopener nofollow">LinkedIn↗</a>, <a href="https://twitter.com/intent/tweet?url=https%3A%2F%2Flinuxblog.io%2Frecommended-cloudflare-performance-security-settings-guide%2F&#038;text=Recommended+Cloudflare+Performance+and+Security+Settings+%28Guide%29" class="share-link" target="_blank" rel="noopener nofollow">X (Twitter)↗</a>, <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Flinuxblog.io%2Frecommended-cloudflare-performance-security-settings-guide%2F" class="share-link" target="_blank" rel="noopener nofollow">Facebook↗</a>, <a href="https://www.reddit.com/submit?url=https%3A%2F%2Flinuxblog.io%2Frecommended-cloudflare-performance-security-settings-guide%2F&#038;title=Recommended+Cloudflare+Performance+and+Security+Settings+%28Guide%29" class="share-link" target="_blank" rel="noopener nofollow">Reddit↗</a>, <a href="https://news.ycombinator.com/submit" target="_blank" rel="noopener nofollow">HN↗</a> or your favorite social platform. Stay updated by <a href="https://landing.mailerlite.com/webforms/landing/t2y6q4" class="additional-link" target="_blank" rel="noopener noreferrer">subscribing to our newsletter</a>, and consider <a href="https://shop.linuxcommunity.io" class="additional-link" target="_blank" rel="noopener noreferrer">grabbing a t-shirt or membership</a> to support the community. Lastly, I would like to <a href="https://linuxcommunity.io/invites/xrFmjFBFeT" class="additional-link" target="_blank" rel="noopener noreferrer">personally invite you</a> to connect with other Linux enthusiasts in our <a href="https://linuxcommunity.io/invites/xrFmjFBFeT" class="additional-link" target="_blank" rel="noopener noreferrer">community forums</a>.<br />             </i></p> </p></div> 					 											
                
                            </section>
                    <section class="feeditem">
                <h2>
                    <a
                        class="itemtitle"
                        href="https://linuxblog.io/pfsense-optimizing-php-fpm-for-long-term-webui-performance/"
                    >pfSense: Optimizing PHP-FPM for Long-Term Web UI Performance</a>
                </h2>

                                    <time datetime="2025-04-28 00:00:00">
                        2025-04-28 00:00:00                    </time>
                    <p></p>
                
                
                <!-- Intentionally not escaping for html context -->
                         	        	<p><a href="https://static.linuxblog.io/wp-content/uploads/2025/04/pfsense-screenshot.png"><img fetchpriority="high" decoding="async" class="alignnone wp-image-20288 size-large" title="pfSense screenshot: Optimizing PHP-FPM for Long-Term WebUI Performance" src="https://static.linuxblog.io/wp-content/uploads/2025/04/pfsense-screenshot-868x659.png" alt="pfSense screenshot: Optimizing PHP-FPM for Long-Term WebUI Performance" width="868" height="659" srcset="https://static.linuxblog.io/wp-content/uploads/2025/04/pfsense-screenshot-868x659.png 868w, https://static.linuxblog.io/wp-content/uploads/2025/04/pfsense-screenshot-300x228.png 300w, https://static.linuxblog.io/wp-content/uploads/2025/04/pfsense-screenshot-560x425.png 560w" sizes="auto" /></a></p> <p><strong><em>I’m sharing these PHP-FPM tweaks for pfSense publicly to solicit feedback and help anyone exploring similar optimizations. There may be more efficient methods or edge cases I haven’t covered. I welcome any suggestions, improvements, or alternative approaches.</em></strong></p><div  class="hayden-14657f9f155d27362aed2b08a63ad2a7 hayden-after-paragraph" id="hayden-14657f9f155d27362aed2b08a63ad2a7"></div> <p>pfSense’s Web UI runs on PHP-FPM, and although the defaults work well out of the box, a few targeted tweaks can make a stable environment even more performative over days, weeks, and months of uptime.</p> <p>Over the weekend, I dove into pfSense’s PHP-FPM boot templates to discover exactly where those settings live. This article is not part 2 of <a title="My $300 pfSense Firewall Appliance – Part 1: Unboxing" href="https://linuxblog.io/pfsense-firewall-appliance-unboxing/" rel="bookmark">My $300 pfSense Firewall Appliance – Part 1: Unboxing</a> series. Consider it a small side quest.</p> <p>Below are four key areas to tune: <strong>OPCode caching, PHP.ini timeouts, input-vars limit, and the PHP-FPM process manager.</strong></p> <p><strong>Note:</strong> These recommendations apply only to pfSense 2.7.x on appliances with <strong data-start="135" data-end="151">4 GB or more</strong> of RAM. <span style="text-decoration: underline;">Use at your own risk!</span></p> <div id="ez-toc-container" class="ez-toc-v2_0_71 ez-toc-wrap-center counter-hierarchy ez-toc-counter ez-toc-custom ez-toc-container-direction"> <div class="ez-toc-title-container"> <div class="ez-toc-title" style="cursor:inherit">In This Article</div> <span class="ez-toc-title-toggle"></span></div> <nav><ul class='ez-toc-list ez-toc-list-level-1' ><li class='ez-toc-page-1 ez-toc-heading-level-2'><a class="ez-toc-link ez-toc-heading-1" href="#Where_is_PHP-FPM_tuned_for_pfSense" title="Where is PHP-FPM tuned for pfSense?">Where is PHP-FPM tuned for pfSense?</a></li><li class='ez-toc-page-1 ez-toc-heading-level-2'><a class="ez-toc-link ez-toc-heading-2" href="#1_Increase_OPCache_Size" title="1. Increase OPCache Size">1. Increase OPCache Size</a></li><li class='ez-toc-page-1 ez-toc-heading-level-2'><a class="ez-toc-link ez-toc-heading-3" href="#2_Tighten_PHP-ini_Timeouts_Raise_Input_Vars" title="2. Tighten PHP-ini Timeouts, Raise Input Vars">2. Tighten PHP-ini Timeouts, Raise Input Vars</a></li><li class='ez-toc-page-1 ez-toc-heading-level-2'><a class="ez-toc-link ez-toc-heading-4" href="#3_Use_%E2%80%98pm_static_for_max_performance" title="3. Use ‘pm static’ for max performance">3. Use ‘pm static’ for max performance</a></li><li class='ez-toc-page-1 ez-toc-heading-level-2'><a class="ez-toc-link ez-toc-heading-5" href="#4_Putting_It_All_Together" title="4. Putting It All Together">4. Putting It All Together</a></li><li class='ez-toc-page-1 ez-toc-heading-level-2'><a class="ez-toc-link ez-toc-heading-6" href="#Making_these_pfSense_PHP_and_PHP-FPM_tweaks_permanent" title="Making these pfSense PHP and PHP-FPM tweaks permanent">Making these pfSense PHP and PHP-FPM tweaks permanent</a></li></ul></nav></div> <h2><span class="ez-toc-section" id="Where_is_PHP-FPM_tuned_for_pfSense"></span>Where is PHP-FPM tuned for pfSense?<span class="ez-toc-section-end"></span></h2> <p>pfSense keeps all (as far as I&#8217;ve found) of its PHP-FPM tuning logic in <strong><code>/etc/rc.php_ini_setup</code></strong>. Below is a brief overview of the tweaks I’ve made to that file and why they matter.</p> <pre># ─── opcache section ─────────────────────────────────────────  <span style="color: #ff0000;">- OPCACHEMEMSIZE="50"</span>  <span style="color: #008000;">+ OPCACHEMEMSIZE="100"</span>    # ─── php.ini section ───────────────────────────────────  <span style="color: #ff0000;">- max_execution_time = 900  - request_terminate_timeout = 900  - max_input_time = 1800  - max_input_vars = 5000</span>  <span style="color: #008000;">+ max_execution_time = 300  + request_terminate_timeout = 300  + max_input_time = 600  + max_input_vars = 10000</span>      # ─── PHP-FPM pool for &gt;1 GB RAM ────────────────────────────  <span style="color: #ff0000;">- PHPFPMREQ=5000</span>  <span style="color: #008000;">+ PHPFPMREQ=0</span></pre> <p>Let&#8217;s go over the changes. From shell type and enter <code>vi /etc/rc.php_ini_setup</code> and compare your settings with the recommendations below.</p> <h2><span class="ez-toc-section" id="1_Increase_OPCache_Size"></span>1. Increase OPCache Size<span class="ez-toc-section-end"></span></h2> <p><img decoding="async" class="alignnone wp-image-20295 size-full" title="Increase PHP OPCache size" src="https://static.linuxblog.io/wp-content/uploads/2025/04/change_php-opcache-size.png" alt="Increase PHP OPCache size" width="868" height="415" srcset="https://static.linuxblog.io/wp-content/uploads/2025/04/change_php-opcache-size.png 868w, https://static.linuxblog.io/wp-content/uploads/2025/04/change_php-opcache-size-300x143.png 300w, https://static.linuxblog.io/wp-content/uploads/2025/04/change_php-opcache-size-560x268.png 560w" sizes="auto" /></p> <p>By default, pfSense allocates a max of 50 MB for <a href="https://linuxblog.io/php-performance-opcache-control-panels/" target="_blank" rel="noopener">PHP’s OPCache</a> on systems with at least 1 GB of RAM. On an appliance with plenty of RAM, you can increase that to avoid unwanted cache pruning and keep compiled scripts in memory longer:</p> <pre># ── in /etc/rc.php_ini_setup ──  if [ "$AVAILMEM" -gt "784" ]; then  OPCACHEMEMSIZE="100"  fi  </pre> <p>With 8 GB installed, a 100 MB of <a href="https://linuxblog.io/php-benchmarks-opcache-performance-tweaks/" target="_blank" rel="noopener">PHP OPCache</a> cache costs almost nothing but reduces the likelihood of OPCache restarts. Especially useful once you add more pfSense packages, and <a href="https://docs.netgate.com/pfsense/en/latest/packages/list.html" target="_blank" rel="noopener">there are many useful packages available</a>.</p> <h2><span class="ez-toc-section" id="2_Tighten_PHP-ini_Timeouts_Raise_Input_Vars"></span>2. Tighten PHP-ini Timeouts, Raise Input Vars<span class="ez-toc-section-end"></span></h2> <p><img decoding="async" class="alignnone wp-image-20296 size-full" title="pfSense template: PHP.ini tweaks." src="https://static.linuxblog.io/wp-content/uploads/2025/04/php-ini-tweaks.png" alt="pfSense template: PHP.ini tweaks." width="868" height="100" srcset="https://static.linuxblog.io/wp-content/uploads/2025/04/php-ini-tweaks.png 868w, https://static.linuxblog.io/wp-content/uploads/2025/04/php-ini-tweaks-300x35.png 300w, https://static.linuxblog.io/wp-content/uploads/2025/04/php-ini-tweaks-560x65.png 560w" sizes="auto" /></p> <p>pfSense’s default PHP timeouts let scripts run (and hang) for 15–30 minutes. You can safely trim them for WebUI tasks, and double the <code>max_input_vars</code> to handle larger config forms:</p> <pre>max_execution_time     = 300  request_terminate_timeout = 300  max_input_time         = 600  max_input_vars         = 10000  </pre> <p>Here&#8217;s my reasoning (if I find any bugs over time, I will be sure to update):</p> <ul> <li>Lowering max_execution_time and request_terminate_timeout to 5 minutes is more than enough for any legitimate WebUI task to complete, while making it faster to clean up stuck processes.</li> <li>Dropping max_input_time to 10 minutes keeps input processing generous but avoids unnecessarily long lockups on stalled uploads or bad sessions.</li> <li>Doubling max_input_vars to 10,000 prepares the system to handle larger config saves without hitting the default input variable limits, especially if you add more firewall rules, NAT settings, or packages like <a href="https://docs.netgate.com/pfsense/en/latest/packages/pfblocker.html" target="_blank" rel="noopener">pfBlockerNG</a>.</li> </ul> <h2><span class="ez-toc-section" id="3_Use_%E2%80%98pm_static_for_max_performance"></span>3. Use ‘pm static’ for max performance<span class="ez-toc-section-end"></span></h2> <p><img loading="lazy" decoding="async" class="alignnone wp-image-20291 size-full" title="Switched pfSense PHP-FPM from dynamic to static. " src="https://static.linuxblog.io/wp-content/uploads/2025/04/pfsense-php-fpm-static.png" alt="Switched pfSense PHP-FPM from dynamic to static. " width="868" height="895" srcset="https://static.linuxblog.io/wp-content/uploads/2025/04/pfsense-php-fpm-static.png 868w, https://static.linuxblog.io/wp-content/uploads/2025/04/pfsense-php-fpm-static-291x300.png 291w, https://static.linuxblog.io/wp-content/uploads/2025/04/pfsense-php-fpm-static-560x577.png 560w" sizes="auto" /></p> <p>In a <a href="https://linuxblog.io/php-fpm-tuning-using-pm-static-max-performance/" target="_blank" rel="noopener">previous article on PHP-FPM performance tuning, I wrote</a>:</p> <p><em>&#8220;I have pm.max_requests set extremely high because this is a production server with no PHP memory leaks. You can use pm.max_requests = 0 with static if you have 110% confidence in your current and future PHP scripts. However, it’s recommended to restart scripts over time.&#8221;</em></p> <p>So I have my pfSense <code>pm.max_requests=0</code> (PHPFPMREQ). However, I would just recommend increasing the default &#8216;5000&#8217; limit (frequency of restarts/clearing process cache).  A fixed (“static”) pool of PHP-FPM workers avoids on-the-fly spawning latency of hitting max requests. I updated the template for systems with more than &gt;1 GB of memory from:</p> <pre>PHPFPMREQ=5000</pre> <p>Changed to:</p> <pre>PHPFPMREQ=50000  fi</pre> <p>Next, this is the block of code responsible for setting the process manager to <code>ondemand</code>, <code>dynamic</code> or <code>static</code>:</p> <pre>if [ $REALMEM -lt 350 ]; then  /bin/cat &gt;&gt; /usr/local/lib/php-fpm.conf &lt;&lt;EOF    pm = ondemand  pm.process_idle_timeout = $PHPFPMIDLE  pm.max_children = $PHPFPMMAX  pm.max_requests = $PHPFPMREQ  EOF    elif [ $REALMEM -gt 1000 ]; then  /bin/cat &gt;&gt; /usr/local/lib/php-fpm.conf &lt;&lt;EOF    pm = dynamic  pm.process_idle_timeout = $PHPFPMIDLE  pm.max_children = $PHPFPMMAX  pm.start_servers = $PHPFPMSTART  pm.max_requests = $PHPFPMREQ  pm.min_spare_servers=1  pm.max_spare_servers= $PHPFPMSPARE    EOF  else    /bin/cat &gt;&gt; /usr/local/lib/php-fpm.conf &lt;&lt;EOF    <strong>pm = static  pm.max_children = $PHPFPMMAX  pm.max_requests = $PHPFPMREQ</strong>  EOF</pre> <p>To switch to <code>static</code> process manager, I changed this line:</p> <pre>elif [ $REALMEM -gt 1000 ]; then</pre> <p>to this:</p> <pre>elif [ $REALMEM -gt <strong>100000</strong> ]; then</pre> <h2><span class="ez-toc-section" id="4_Putting_It_All_Together"></span>4. Putting It All Together<span class="ez-toc-section-end"></span></h2> <p><img loading="lazy" decoding="async" class="alignnone wp-image-20290 size-full" title="Check the generated php-ini, check the active PHP-FPM pool file and verify via the PHP-FPM status page" src="https://static.linuxblog.io/wp-content/uploads/2025/04/pfsense-verify-pfp-fpm-settings.png" alt="Check the generated php-ini, check the active PHP-FPM pool file and verify via the PHP-FPM status page" width="868" height="485" srcset="https://static.linuxblog.io/wp-content/uploads/2025/04/pfsense-verify-pfp-fpm-settings.png 868w, https://static.linuxblog.io/wp-content/uploads/2025/04/pfsense-verify-pfp-fpm-settings-300x168.png 300w, https://static.linuxblog.io/wp-content/uploads/2025/04/pfsense-verify-pfp-fpm-settings-560x313.png 560w" sizes="auto" /></p> <p>After restarting PHP-FPM, verify your settings. To confirm which values actually made it into your running config, inspect the files <strong>after</strong> PHP-FPM restart:</p> <p><strong>Check the generated php-ini</strong></p> <pre>grep -E 'opcache.memory_consumption|max_execution_time|request_terminate_timeout|max_input_time|max_input_vars' /usr/local/etc/php.ini  </pre> <p><strong>Check the active PHP-FPM pool file</strong></p> <pre>grep -E 'pm =' /usr/local/lib/php-fpm.conf</pre> <p>You should see <code>pm = static</code>—showing which manager mode is in use.</p> <p><strong>Verify via the PHP-FPM status page</strong></p> <pre>curl -k https://127.0.0.1/status  </pre> <p>Look for “process manager: <strong>static</strong>” and your <code>max_children</code> value. <strong>Note:</strong> That the <code>PHPFPMIDLE</code> (<em>pm.process_idle_timeout</em>) setting only applies on <code>dynamic</code> and <code>ondemand</code>, it&#8217;s by design ignored by <code>static</code> pm. The static process manager then keeps the number of running processes most and stable without any overhead.</p> <p>If you have PHP-FPM crashes or otherwise unstable Web UI, avoid these tweaks.</p> <p><strong>Next Steps:</strong><br /> • If you install heavy packages or multiple admins using the Web UI concurrently (unlikely), consider raising <code>PHPFPMMAX</code> to 10–12.<br /> • Revisit and increase <code>PHPFPMREQ</code> after stability is proven. Longer lifespans mean less cache churn but more risk of memory leaks.</p> <p>With OPCache, tightened timeouts, generous input limits, and a static worker pool, your pfSense PHP-FPM setup will deliver reliable, long-term performance. If login today and then two weeks later, you will benefit from cache. With the default ondemand and dynamic it means after an idle timeout of a few mins to 1 hour, things reset and clear.</p> <h2><span class="ez-toc-section" id="Making_these_pfSense_PHP_and_PHP-FPM_tweaks_permanent"></span>Making these pfSense PHP and PHP-FPM tweaks permanent<span class="ez-toc-section-end"></span></h2> <p>Any edits you make under <code>/etc/rc.php_ini_setup</code> or to the generated files in <code>/usr/local</code> will get blown away the next time pfSense gets updated. To make your tweaks stick, put them into a patch or a boot-time script that’s stored in your config—pfSense will reapply it every reboot or upgrade, revert if broken after update.</p><div  class="hayden-a394e417f418ae6f8c6efb39201b9910 hayden-end-of-article" id="hayden-a394e417f418ae6f8c6efb39201b9910"></div> <h3 class="tag-line" style="margin-top: 30px; padding-top: 20px; padding-bottom: 8px; border-top: 1px solid #ddd;">Tags: <a href="https://linuxblog.io/tag/cybersecurity/" rel="tag">cybersecurity</a>, <a href="https://linuxblog.io/tag/security/" rel="tag">security</a>, <a href="https://linuxblog.io/tag/server/" rel="tag">server</a>, <a href="https://linuxblog.io/tag/sysadmins/" rel="tag">sysadmins</a></h3> <div class="custom-post-footer" style="margin-top: 0px; padding-top: 0px; padding-bottom: 0px;"> <p class="share-message"><i>Thanks for reading! Please share this article on <a href="https://www.linkedin.com/shareArticle?mini=true&#038;url=https%3A%2F%2Flinuxblog.io%2Fpfsense-optimizing-php-fpm-for-long-term-webui-performance%2F&#038;title=pfSense%3A+Optimizing+PHP-FPM+for+Long-Term+Web+UI+Performance" class="share-link" target="_blank" rel="noopener nofollow">LinkedIn↗</a>, <a href="https://twitter.com/intent/tweet?url=https%3A%2F%2Flinuxblog.io%2Fpfsense-optimizing-php-fpm-for-long-term-webui-performance%2F&#038;text=pfSense%3A+Optimizing+PHP-FPM+for+Long-Term+Web+UI+Performance" class="share-link" target="_blank" rel="noopener nofollow">X (Twitter)↗</a>, <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Flinuxblog.io%2Fpfsense-optimizing-php-fpm-for-long-term-webui-performance%2F" class="share-link" target="_blank" rel="noopener nofollow">Facebook↗</a>, <a href="https://www.reddit.com/submit?url=https%3A%2F%2Flinuxblog.io%2Fpfsense-optimizing-php-fpm-for-long-term-webui-performance%2F&#038;title=pfSense%3A+Optimizing+PHP-FPM+for+Long-Term+Web+UI+Performance" class="share-link" target="_blank" rel="noopener nofollow">Reddit↗</a>, <a href="https://news.ycombinator.com/submit" target="_blank" rel="noopener nofollow">HN↗</a> or your favorite social platform. Stay updated by <a href="https://landing.mailerlite.com/webforms/landing/t2y6q4" class="additional-link" target="_blank" rel="noopener noreferrer">subscribing to our newsletter</a>, and consider <a href="https://shop.linuxcommunity.io" class="additional-link" target="_blank" rel="noopener noreferrer">grabbing a t-shirt or membership</a> to support the community. Lastly, I would like to <a href="https://linuxcommunity.io/invites/xrFmjFBFeT" class="additional-link" target="_blank" rel="noopener noreferrer">personally invite you</a> to connect with other Linux enthusiasts in our <a href="https://linuxcommunity.io/invites/xrFmjFBFeT" class="additional-link" target="_blank" rel="noopener noreferrer">community forums</a>.<br />             </i></p> </p></div> 					 											
                
                            </section>
        
    </div>
 </body>
</html>
